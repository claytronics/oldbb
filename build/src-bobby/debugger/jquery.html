<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
<!--<link rel="stylesheet" href="/resources/demos/style.css">-->
<!--<link rel="stylesheet" href="/resources/demos/style.css">-->
<script>
$(document).ready(function(){
		$( "#tabs" ).tabs();

		$("#Reset").click(function() {
			alert("Resetting the blinky blocks");
			$.get("/a/reset",function(data,status){
				alert("Reset Done");
				});

			});

		$("#Tree").click(function() {
			alert("Getting the count of blinky blocks");
			$.getJSON("/a/num_tree",function(data,status){
				console.log(data);
				var text = data; 
				//var obj = JSON.parse(text);
				//alert(data.count);
				var i;
				for(i = 0 ; i < data.count;i++){
				var d_id = i+1;
				$( "#block"+i+"" ).append("<div id='block"+d_id+"'>" );
				//$( "<div id='block"+i+"'>" ).append( "#block"+d_id+"'>" );
				$("#block"+i+"").append("<p>your block "+i+" logs here</p>");
				$("#block"+d_id+"").ready(function() {
					console.log("I am ready"+d_id);	
					});

				var myVar=setInterval(function(){update_logs()},1000);
				//$( "<div id='answerdiv-"+d_id+"'>This is div with id "+d_id+"</div>" ).insertAfter( "#answerdiv-"+i );
				}
				});

			});

		$("#Submit").click(function() {
				var url = $("#url").val();
				if( url == "")
				{
				alert("please enter valid url");
				return;
				}
				alert("url "+url);
				$.get(url,function(data,status){
					//alert(data);
					$("#TEXT2").html(function(i,orig_text){return (orig_text+data)});
					});


				});


		function update_logs() {
			$.getJSON("/a/debug_logs?",function(data,status){
					//$("#TEXT2").html(function(i,orig_text){return (orig_text+data).replace(/\n/g,"<br>")});
					//$("#TEXT2").html(data);
					//console.log(data.messages.length);
					var i = 0;
					if(data.messages.length != 1){

					for(i = 0 ; i < data.messages.length-1;i++){
					console.log(data.messages[i]);
					}
					}
					});
		}

		//var myVar=setInterval(function(){update_logs()},1000);

});

</script>
</head>
<body>
<div id="tabs">
<ul>
<li><a href="#tabs-1">Debugger</a></li>
<li><a href="#tabs-2">Debug Messages</a></li>
<li><a href="#tabs-3">Files</a></li>
</ul>
<div id="tabs-1">
<div id=form>
enter the url <input id=url type=text></input>
<button id="Submit">Submit</button>
<div>
<button id=Reset>RESET</button>
<button id="Tree">Start Logging</button>
</div>

</div>

</div>
<div id="tabs-2">
<div id="TEXT">
<div id="block0"></div>
</div>
</div>


<div id="tabs-3">
<div id="TEXT2">
</div>
</div>
</div>
<!--<div id = content>
<div = contents>
</div>
</div>-->
</body>
</html>
