   1               		.file	"soft_uart2.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__CCP__ = 0x34
   7               	__tmp_reg__ = 0
   8               	__zero_reg__ = 1
   9               		.text
  10               	.Ltext0:
  11               	.global	timer_set
  13               	timer_set:
  14               	.LFB12:
  15               		.file 1 "/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c"
   1:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** #include "soft_uart2.h"
   2:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
   3:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** #include "../system/handler.h"
   4:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
   5:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** soft_uart_t soft_uart[NUM_SOFTWARE_UARTS];
   6:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
   7:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** /*
   8:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** void timer_isr(soft_uart_t * uart)
   9:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** {
  10:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	char			start_bit, flag_in;
  11:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	
  12:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** //	uart->timer1->PER = 93;
  13:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
  14:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** // Transmitter Section
  15:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	if ( uart->flag_tx_ready )
  16:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		{
  17:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		if ( --(uart->timer_tx_ctr) <= 0 )
  18:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			{
  19:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			//mask = (uart->internal_tx_buffer) & 0x01;
  20:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			//(uart->internal_tx_buffer) >>= 1;
  21:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			if ( ((uart->internal_tx_buffer) & 0x0001) == 0x01)
  22:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				{
  23:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				SET_TX_PIN_HIGH(uart);
  24:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				}
  25:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			else
  26:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				{
  27:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				SET_TX_PIN_LOW(uart);
  28:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				}
  29:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				
  30:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			uart->internal_tx_buffer >>= 1;
  31:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			uart->timer_tx_ctr = 3;
  32:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			if ( --(uart->bits_left_in_tx) <= 0 )
  33:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				{
  34:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					uart->flag_tx_ready = FALSE;
  35:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					SET_TX_PIN_HIGH(uart);	
  36:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					TriggerHandler(SYSTEM_SOFT_UART_UPDATE);		
  37:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				}
  38:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			}
  39:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		}
  40:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** // Receiver Section
  41:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	if ( uart->flag_rx_off==FALSE )
  42:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		{
  43:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		if ( uart->flag_rx_waiting_for_stop_bit )
  44:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			{
  45:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			if ( --(uart->timer_rx_ctr) <=0 )
  46:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				{
  47:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				uart->flag_rx_waiting_for_stop_bit = FALSE;
  48:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				uart->flag_rx_ready = FALSE;
  49:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				uart->internal_rx_buffer &= 0xFF;
  50:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				if ( uart->internal_rx_buffer!=0xC2 )
  51:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					{
  52:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					(uart->inbuf)[uart->qin] = uart->internal_rx_buffer;
  53:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					TriggerHandler(SYSTEM_SOFT_UART_UPDATE);
  54:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					if ( ++(uart->qin)>=SOFT_IN_BUF_SIZE )
  55:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 						{
  56:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 						uart->qin = 0;
  57:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 						}
  58:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					}
  59:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				}
  60:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			}
  61:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		else		// rx_test_busy
  62:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			{
  63:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			if ( uart->flag_rx_ready==FALSE )
  64:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				{
  65:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					start_bit = GET_RX_PIN_STATUS(uart);
  66:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** // Test for Start Bit
  67:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				if ( start_bit==0 )
  68:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					{
  69:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					uart->flag_rx_ready = TRUE;
  70:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					uart->internal_rx_buffer = 0;
  71:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					uart->timer_rx_ctr = 4;
  72:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					uart->bits_left_in_rx = uart->rx_num_of_bits;
  73:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					uart->rx_mask = 1;
  74:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					}
  75:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				}
  76:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			else	// rx_busy
  77:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				{
  78:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				if ( --(uart->timer_rx_ctr)<=0 )
  79:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					{				// rcv
  80:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					uart->timer_rx_ctr = 3;
  81:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					flag_in = GET_RX_PIN_STATUS(uart);
  82:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					if ( flag_in )
  83:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 						{
  84:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 						(uart->internal_rx_buffer) |= uart->rx_mask;
  85:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 						}
  86:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					uart->rx_mask <<= 1;
  87:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					if ( --(uart->bits_left_in_rx)<=0 )
  88:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 						{
  89:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 						uart->flag_rx_waiting_for_stop_bit = TRUE;
  90:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 						}
  91:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 					}
  92:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				}
  93:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			}
  94:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		}
  95:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	}
  96:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** */
  97:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
  98:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** void timer_set( uint32_t bps, TC0_t * tx_timer, TC1_t * rx_timer)
  99:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** {
  16               		.loc 1 99 0
  17               	.LVL0:
  18 0000 6F92      		push r6
  19               	.LCFI0:
  20 0002 7F92      		push r7
  21               	.LCFI1:
  22 0004 8F92      		push r8
  23               	.LCFI2:
  24 0006 9F92      		push r9
  25               	.LCFI3:
  26 0008 AF92      		push r10
  27               	.LCFI4:
  28 000a BF92      		push r11
  29               	.LCFI5:
  30 000c CF92      		push r12
  31               	.LCFI6:
  32 000e DF92      		push r13
  33               	.LCFI7:
  34 0010 EF92      		push r14
  35               	.LCFI8:
  36 0012 FF92      		push r15
  37               	.LCFI9:
  38 0014 0F93      		push r16
  39               	.LCFI10:
  40 0016 1F93      		push r17
  41               	.LCFI11:
  42 0018 CF93      		push r28
  43               	.LCFI12:
  44 001a DF93      		push r29
  45               	.LCFI13:
  46               	/* prologue: function */
  47               	/* frame size = 0 */
  48               	/* stack size = 14 */
  49               	.L__stack_usage = 14
  50 001c 4B01      		movw r8,r22
  51 001e 5C01      		movw r10,r24
  52 0020 8A01      		movw r16,r20
  53 0022 E901      		movw r28,r18
 100:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	uint16_t per;
 101:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	
 102:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	per = ((uint32_t)F_CPU / (bps));
  54               		.loc 1 102 0
  55 0024 C12C      		mov r12,__zero_reg__
  56 0026 88E4      		ldi r24,lo8(72)
  57 0028 D82E      		mov r13,r24
  58 002a 88EE      		ldi r24,lo8(-24)
  59 002c E82E      		mov r14,r24
  60 002e FF24      		clr r15
  61 0030 F394      		inc r15
  62 0032 C701      		movw r24,r14
  63 0034 B601      		movw r22,r12
  64               	.LVL1:
  65 0036 A501      		movw r20,r10
  66 0038 9401      		movw r18,r8
  67               	.LVL2:
  68 003a 0E94 0000 		call __udivmodsi4
 103:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 104:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	tx_timer->INTCTRLA = TC_OVFINTLVL_HI_gc;
  69               		.loc 1 104 0
  70 003e 93E0      		ldi r25,lo8(3)
  71 0040 692E      		mov r6,r25
  72 0042 F801      		movw r30,r16
  73 0044 6682      		std Z+6,r6
 105:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	tx_timer->PER = per;
  74               		.loc 1 105 0
  75 0046 26A3      		std Z+38,r18
  76 0048 37A3      		std Z+39,r19
 106:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	tx_timer->CTRLA = TC_CLKSEL_DIV1_gc;
  77               		.loc 1 106 0
  78 004a 7724      		clr r7
  79 004c 7394      		inc r7
  80 004e 7082      		st Z,r7
 107:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	
 108:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** //	printf("TCE0 set to %x %x %x\r\n",tx_timer->INTCTRLA, tx_timer->PER, tx_timer->CTRLA);
 109:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	
 110:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	per = ((uint32_t)F_CPU / (bps*3));	
  81               		.loc 1 110 0
  82 0050 A3E0      		ldi r26,lo8(3)
  83 0052 B0E0      		ldi r27,0
  84 0054 A501      		movw r20,r10
  85 0056 9401      		movw r18,r8
  86 0058 0E94 0000 		call __muluhisi3
  87 005c 9B01      		movw r18,r22
  88 005e AC01      		movw r20,r24
  89 0060 C701      		movw r24,r14
  90 0062 B601      		movw r22,r12
  91 0064 0E94 0000 		call __udivmodsi4
 111:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	//per = 31; // bps*9
 112:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	
 113:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	rx_timer->INTCTRLA = TC_OVFINTLVL_HI_gc;
  92               		.loc 1 113 0
  93 0068 6E82      		std Y+6,r6
 114:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	rx_timer->PER = per;
  94               		.loc 1 114 0
  95 006a 2EA3      		std Y+38,r18
  96 006c 3FA3      		std Y+39,r19
 115:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	rx_timer->CTRLA = TC_CLKSEL_DIV1_gc;	
  97               		.loc 1 115 0
  98 006e 7882      		st Y,r7
  99               	/* epilogue start */
 116:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** }
 100               		.loc 1 116 0
 101 0070 DF91      		pop r29
 102 0072 CF91      		pop r28
 103               	.LVL3:
 104 0074 1F91      		pop r17
 105 0076 0F91      		pop r16
 106 0078 FF90      		pop r15
 107 007a EF90      		pop r14
 108 007c DF90      		pop r13
 109 007e CF90      		pop r12
 110 0080 BF90      		pop r11
 111 0082 AF90      		pop r10
 112 0084 9F90      		pop r9
 113 0086 8F90      		pop r8
 114               	.LVL4:
 115 0088 7F90      		pop r7
 116 008a 6F90      		pop r6
 117 008c 0895      		ret
 118               	.LFE12:
 120               	.global	configure_soft_uart
 122               	configure_soft_uart:
 123               	.LFB13:
 117:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 118:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** void configure_soft_uart(soft_uart_t * uart, CircBuf * ctx, CircBuf * crx)
 119:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** {
 124               		.loc 1 119 0
 125               	.LVL5:
 126               	/* prologue: function */
 127               	/* frame size = 0 */
 128               	/* stack size = 0 */
 129               	.L__stack_usage = 0
 130 008e FC01      		movw r30,r24
 120:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	uart->rx = crx;
 131               		.loc 1 120 0
 132 0090 4087      		std Z+8,r20
 133 0092 5187      		std Z+9,r21
 121:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	uart->tx = ctx;
 134               		.loc 1 121 0
 135 0094 6683      		std Z+6,r22
 136 0096 7783      		std Z+7,r23
 122:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	uart->internal_rx_buffer =  0;
 137               		.loc 1 122 0
 138 0098 1082      		st Z,__zero_reg__
 123:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	uart->internal_tx_buffer  = 0;
 139               		.loc 1 123 0
 140 009a 1182      		std Z+1,__zero_reg__
 141 009c 1282      		std Z+2,__zero_reg__
 142 009e 0895      		ret
 143               	.LFE13:
 145               	.global	init_soft_uart
 147               	init_soft_uart:
 148               	.LFB14:
 124:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** }
 125:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 126:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** void init_soft_uart()
 127:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** {
 149               		.loc 1 127 0
 150               	/* prologue: function */
 151               	/* frame size = 0 */
 152               	/* stack size = 0 */
 153               	.L__stack_usage = 0
 128:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	PORTD.OUTSET = PIN5_bm | PIN6_bm; // set tx output high (idle)
 154               		.loc 1 128 0
 155 00a0 E0E6      		ldi r30,lo8(96)
 156 00a2 F6E0      		ldi r31,lo8(6)
 157 00a4 80E6      		ldi r24,lo8(96)
 158 00a6 8583      		std Z+5,r24
 129:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	PORTD.DIRSET = PIN5_bm | PIN6_bm; // tx pins as output
 159               		.loc 1 129 0
 160 00a8 8183      		std Z+1,r24
 130:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	PORTD.DIRCLR = PIN4_bm | PIN7_bm; // rx pins as input
 161               		.loc 1 130 0
 162 00aa 80E9      		ldi r24,lo8(-112)
 163 00ac 8283      		std Z+2,r24
 131:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	
 132:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	PORTD.PIN4CTRL |= PORT_OPC_PULLUP_gc;	// set pullups on rx lines to prevent floating noise
 164               		.loc 1 132 0
 165 00ae 8489      		ldd r24,Z+20
 166 00b0 8861      		ori r24,lo8(24)
 167 00b2 848B      		std Z+20,r24
 133:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	PORTD.PIN7CTRL |= PORT_OPC_PULLUP_gc;	
 168               		.loc 1 133 0
 169 00b4 8789      		ldd r24,Z+23
 170 00b6 8861      		ori r24,lo8(24)
 171 00b8 878B      		std Z+23,r24
 134:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 135:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	soft_uart[1].rx_state = SU_RX_IDLE;
 172               		.loc 1 135 0
 173 00ba 1092 0000 		sts soft_uart+14,__zero_reg__
 174               	.LVL6:
 175               	.LBB4:
 176               	.LBB5:
 104:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	tx_timer->INTCTRLA = TC_OVFINTLVL_HI_gc;
 177               		.loc 1 104 0
 178 00be E0E0      		ldi r30,0
 179 00c0 FAE0      		ldi r31,lo8(10)
 180 00c2 33E0      		ldi r19,lo8(3)
 181 00c4 3683      		std Z+6,r19
 105:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	tx_timer->PER = per;
 182               		.loc 1 105 0
 183 00c6 81E4      		ldi r24,lo8(65)
 184 00c8 93E0      		ldi r25,lo8(3)
 185 00ca 86A3      		std Z+38,r24
 186 00cc 97A3      		std Z+39,r25
 106:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	tx_timer->CTRLA = TC_CLKSEL_DIV1_gc;
 187               		.loc 1 106 0
 188 00ce 21E0      		ldi r18,lo8(1)
 189 00d0 2083      		st Z,r18
 190               	.LVL7:
 113:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	rx_timer->INTCTRLA = TC_OVFINTLVL_HI_gc;
 191               		.loc 1 113 0
 192 00d2 E0E4      		ldi r30,lo8(64)
 193 00d4 F9E0      		ldi r31,lo8(9)
 194 00d6 3683      		std Z+6,r19
 114:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	rx_timer->PER = per;
 195               		.loc 1 114 0
 196 00d8 85E1      		ldi r24,lo8(21)
 197 00da 91E0      		ldi r25,lo8(1)
 198 00dc 86A3      		std Z+38,r24
 199 00de 97A3      		std Z+39,r25
 115:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	rx_timer->CTRLA = TC_CLKSEL_DIV1_gc;	
 200               		.loc 1 115 0
 201 00e0 2083      		st Z,r18
 202 00e2 0895      		ret
 203               	.LBE5:
 204               	.LBE4:
 205               	.LFE14:
 207               	.global	su_getchar
 209               	su_getchar:
 210               	.LFB15:
 136:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 137:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	timer_set( BAUD_RATE, &TCE0, &TCD1);	
 138:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** }
 139:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 140:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** int su_getchar(soft_uart_t * uart)
 141:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** {
 211               		.loc 1 141 0
 212               	.LVL8:
 213 00e4 CF93      		push r28
 214               	.LCFI14:
 215 00e6 DF93      		push r29
 216               	.LCFI15:
 217               	/* prologue: function */
 218               	/* frame size = 0 */
 219               	/* stack size = 2 */
 220               	.L__stack_usage = 2
 221 00e8 EC01      		movw r28,r24
 142:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	char		ch;
 143:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 144:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	if(isEmpty((uart->rx)))
 222               		.loc 1 144 0
 223 00ea 8885      		ldd r24,Y+8
 224 00ec 9985      		ldd r25,Y+9
 225               	.LVL9:
 226 00ee 0E94 0000 		call isEmpty
 227               	.LVL10:
 228 00f2 8111      		cpse r24,__zero_reg__
 229 00f4 00C0      		rjmp .L6
 145:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	{
 146:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		return -1;
 147:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	}
 148:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	else
 149:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	{	
 150:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		ch = pop((uart->rx));
 230               		.loc 1 150 0
 231 00f6 8885      		ldd r24,Y+8
 232 00f8 9985      		ldd r25,Y+9
 233 00fa 0E94 0000 		call pop
 234               	.LVL11:
 235 00fe 9C01      		movw r18,r24
 236               	.LVL12:
 151:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		return( ch );
 237               		.loc 1 151 0
 238 0100 3327      		clr r19
 239               	.LVL13:
 240 0102 00C0      		rjmp .L5
 241               	.LVL14:
 242               	.L6:
 146:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		return -1;
 243               		.loc 1 146 0
 244 0104 2FEF      		ldi r18,lo8(-1)
 245 0106 3FEF      		ldi r19,lo8(-1)
 246               	.L5:
 152:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	}
 153:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** }
 247               		.loc 1 153 0
 248 0108 C901      		movw r24,r18
 249               	/* epilogue start */
 250 010a DF91      		pop r29
 251 010c CF91      		pop r28
 252               	.LVL15:
 253 010e 0895      		ret
 254               	.LFE15:
 256               	.global	set_tx_char
 258               	set_tx_char:
 259               	.LFB16:
 154:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 155:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** void set_tx_char(int ch, soft_uart_t * uart)
 156:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** {
 260               		.loc 1 156 0
 261               	.LVL16:
 262               	/* prologue: function */
 263               	/* frame size = 0 */
 264               	/* stack size = 0 */
 265               	.L__stack_usage = 0
 157:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	if(ch != -1)
 266               		.loc 1 157 0
 267 0110 8F3F      		cpi r24,-1
 268 0112 2FEF      		ldi r18,-1
 269 0114 9207      		cpc r25,r18
 270 0116 01F0      		breq .L7
 158:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	{
 159:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		uart->internal_tx_buffer = (ch << 1) | 0x200;
 271               		.loc 1 159 0
 272 0118 880F      		lsl r24
 273 011a 991F      		rol r25
 274               	.LVL17:
 275 011c 9260      		ori r25,2
 276 011e FB01      		movw r30,r22
 277 0120 8183      		std Z+1,r24
 278 0122 9283      		std Z+2,r25
 279               	.L7:
 280 0124 0895      		ret
 281               	.LFE16:
 283               	.global	su_putchar
 285               	su_putchar:
 286               	.LFB17:
 160:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	}
 161:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** }
 162:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 163:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** void su_putchar( char ch, soft_uart_t * uart)
 164:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** {	
 287               		.loc 1 164 0
 288               	/* prologue: function */
 289               	/* frame size = 0 */
 290               	/* stack size = 0 */
 291               	.L__stack_usage = 0
 292               	.LVL18:
 293               	.L13:
 165:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	while ( uart->internal_tx_buffer != 0 );
 294               		.loc 1 165 0 discriminator 1
 295 0126 FB01      		movw r30,r22
 296 0128 2181      		ldd r18,Z+1
 297 012a 3281      		ldd r19,Z+2
 298 012c 232B      		or r18,r19
 299 012e 01F4      		brne .L13
 166:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	
 167:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	set_tx_char(ch, uart);
 300               		.loc 1 167 0
 301 0130 90E0      		ldi r25,0
 302 0132 0C94 0000 		jmp set_tx_char
 303               	.LVL19:
 304               	.LFE17:
 306               	.global	kbhit
 308               	kbhit:
 309               	.LFB18:
 168:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** //	uart->user_tx_buffer = ch;
 169:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 170:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** // invoke_UART_transmit
 171:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** //	uart->timer_tx_ctr = 3;
 172:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** //	uart->bits_left_in_tx = uart->tx_num_of_bits;
 173:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 174:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	// insert start/stop bits around character
 175:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 176:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** }
 177:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 178:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** int kbhit( soft_uart_t * uart )
 179:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** {
 310               		.loc 1 179 0
 311               	.LVL20:
 312               	/* prologue: function */
 313               	/* frame size = 0 */
 314               	/* stack size = 0 */
 315               	.L__stack_usage = 0
 180:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	return( !isEmpty(uart->rx));
 316               		.loc 1 180 0
 317 0136 FC01      		movw r30,r24
 318 0138 8085      		ldd r24,Z+8
 319 013a 9185      		ldd r25,Z+9
 320               	.LVL21:
 321 013c 0E94 0000 		call isEmpty
 322               	.LVL22:
 323 0140 21E0      		ldi r18,lo8(1)
 324 0142 30E0      		ldi r19,0
 325 0144 8823      		tst r24
 326 0146 01F0      		breq .L16
 327 0148 20E0      		ldi r18,0
 328 014a 30E0      		ldi r19,0
 329               	.L16:
 181:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** }
 330               		.loc 1 181 0
 331 014c C901      		movw r24,r18
 332 014e 0895      		ret
 333               	.LFE18:
 335               	.global	__vector_83
 337               	__vector_83:
 338               	.LFB19:
 182:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 183:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** // rx ISR
 184:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** ISR(TCD1_OVF_vect)
 185:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** {
 339               		.loc 1 185 0
 340 0150 1F92      		push r1
 341               	.LCFI16:
 342 0152 0F92      		push r0
 343               	.LCFI17:
 344 0154 0FB6      		in r0,__SREG__
 345 0156 0F92      		push r0
 346 0158 1124      		clr __zero_reg__
 347 015a 0BB6      		in r0,__RAMPZ__
 348 015c 0F92      		push r0
 349 015e 2F93      		push r18
 350               	.LCFI18:
 351 0160 3F93      		push r19
 352               	.LCFI19:
 353 0162 4F93      		push r20
 354               	.LCFI20:
 355 0164 5F93      		push r21
 356               	.LCFI21:
 357 0166 6F93      		push r22
 358               	.LCFI22:
 359 0168 7F93      		push r23
 360               	.LCFI23:
 361 016a 8F93      		push r24
 362               	.LCFI24:
 363 016c 9F93      		push r25
 364               	.LCFI25:
 365 016e AF93      		push r26
 366               	.LCFI26:
 367 0170 BF93      		push r27
 368               	.LCFI27:
 369 0172 EF93      		push r30
 370               	.LCFI28:
 371 0174 FF93      		push r31
 372               	.LCFI29:
 373               	/* prologue: Signal */
 374               	/* frame size = 0 */
 375               	/* stack size = 16 */
 376               	.L__stack_usage = 16
 186:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	if(!soft_uart[0].sample_time)
 377               		.loc 1 186 0
 378 0176 8091 0000 		lds r24,soft_uart+5
 379 017a 8111      		cpse r24,__zero_reg__
 380 017c 00C0      		rjmp .L21
 187:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	{
 188:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		if(soft_uart[0].rx_state == SU_RX_IDLE)
 381               		.loc 1 188 0
 382 017e 8091 0000 		lds r24,soft_uart+4
 383 0182 8111      		cpse r24,__zero_reg__
 384 0184 00C0      		rjmp .L22
 189:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		{
 190:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			if(!(PORTD.IN & PIN4_bm))
 385               		.loc 1 190 0
 386 0186 8091 6806 		lds r24,1640
 387 018a 84FD      		sbrc r24,4
 388 018c 00C0      		rjmp .L23
 191:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			{
 192:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				soft_uart[0].rx_state = SU_RX_BYTE;
 389               		.loc 1 192 0
 390 018e 81E0      		ldi r24,lo8(1)
 391 0190 8093 0000 		sts soft_uart+4,r24
 193:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				soft_uart[0].rx_mask = 0x01;
 392               		.loc 1 193 0
 393 0194 8093 0000 		sts soft_uart+3,r24
 194:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				soft_uart[0].sample_time = 3;	// begin sampling every third time
 394               		.loc 1 194 0
 395 0198 83E0      		ldi r24,lo8(3)
 396 019a 00C0      		rjmp .L41
 397               	.L22:
 195:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			}
 196:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		}
 197:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		else if (soft_uart[0].rx_state == SU_RX_BYTE)
 398               		.loc 1 197 0
 399 019c 8130      		cpi r24,lo8(1)
 400 019e 01F4      		brne .L24
 198:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		{
 199:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			if(PORTD.IN & PIN4_bm)
 401               		.loc 1 199 0
 402 01a0 8091 6806 		lds r24,1640
 403 01a4 84FF      		sbrs r24,4
 404 01a6 00C0      		rjmp .L25
 200:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			{
 201:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				soft_uart[0].internal_rx_buffer |= soft_uart[0].rx_mask;
 405               		.loc 1 201 0
 406 01a8 8091 0000 		lds r24,soft_uart
 407 01ac 9091 0000 		lds r25,soft_uart+3
 408 01b0 892B      		or r24,r25
 409 01b2 8093 0000 		sts soft_uart,r24
 410               	.L25:
 202:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			}
 203:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			
 204:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			soft_uart[0].rx_mask <<= 1;
 411               		.loc 1 204 0
 412 01b6 8091 0000 		lds r24,soft_uart+3
 413 01ba 880F      		lsl r24
 414 01bc 8093 0000 		sts soft_uart+3,r24
 205:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 206:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			if(!soft_uart[0].rx_mask)
 415               		.loc 1 206 0
 416 01c0 8111      		cpse r24,__zero_reg__
 417 01c2 00C0      		rjmp .L26
 207:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			{
 208:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				soft_uart[0].rx_state = SU_RX_STOP;
 418               		.loc 1 208 0
 419 01c4 82E0      		ldi r24,lo8(2)
 420 01c6 8093 0000 		sts soft_uart+4,r24
 421               	.L26:
 209:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			}
 210:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			
 211:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			soft_uart[0].sample_time = 2;	
 422               		.loc 1 211 0
 423 01ca 82E0      		ldi r24,lo8(2)
 424 01cc 00C0      		rjmp .L41
 425               	.L24:
 212:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		}
 213:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		else if (soft_uart[0].rx_state == SU_RX_STOP)
 426               		.loc 1 213 0
 427 01ce 8230      		cpi r24,lo8(2)
 428 01d0 01F4      		brne .L23
 214:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		{
 215:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			if(PORTD.IN & PIN4_bm)
 429               		.loc 1 215 0
 430 01d2 8091 6806 		lds r24,1640
 431 01d6 84FF      		sbrs r24,4
 432 01d8 00C0      		rjmp .L27
 216:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			{
 217:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				push(soft_uart[0].internal_rx_buffer, soft_uart[0].rx);
 433               		.loc 1 217 0
 434 01da 8091 0000 		lds r24,soft_uart
 435 01de 6091 0000 		lds r22,soft_uart+8
 436 01e2 7091 0000 		lds r23,soft_uart+8+1
 437 01e6 0E94 0000 		call push
 438               	.LVL23:
 218:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				soft_uart[0].internal_rx_buffer = 0;
 439               		.loc 1 218 0
 440 01ea 1092 0000 		sts soft_uart,__zero_reg__
 441               	.L27:
 219:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			}
 220:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			
 221:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			soft_uart[0].rx_state = SU_RX_IDLE;		
 442               		.loc 1 221 0
 443 01ee 1092 0000 		sts soft_uart+4,__zero_reg__
 444 01f2 00C0      		rjmp .L23
 445               	.L21:
 222:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		}
 223:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	}
 224:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	else
 225:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	{
 226:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		soft_uart[0].sample_time--;
 446               		.loc 1 226 0
 447 01f4 8150      		subi r24,lo8(-(-1))
 448               	.L41:
 449 01f6 8093 0000 		sts soft_uart+5,r24
 450               	.L23:
 227:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	}
 228:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 229:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	if(!soft_uart[1].sample_time)
 451               		.loc 1 229 0
 452 01fa 8091 0000 		lds r24,soft_uart+15
 453 01fe 8111      		cpse r24,__zero_reg__
 454 0200 00C0      		rjmp .L28
 230:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	{
 231:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		if(soft_uart[1].rx_state == SU_RX_IDLE)
 455               		.loc 1 231 0
 456 0202 8091 0000 		lds r24,soft_uart+14
 457 0206 8111      		cpse r24,__zero_reg__
 458 0208 00C0      		rjmp .L29
 232:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		{
 233:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			if(!(PORTD.IN & PIN7_bm))
 459               		.loc 1 233 0
 460 020a 8091 6806 		lds r24,1640
 461 020e 87FD      		sbrc r24,7
 462 0210 00C0      		rjmp .L20
 234:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			{
 235:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				soft_uart[1].rx_state = SU_RX_BYTE;
 463               		.loc 1 235 0
 464 0212 81E0      		ldi r24,lo8(1)
 465 0214 8093 0000 		sts soft_uart+14,r24
 236:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				soft_uart[1].rx_mask = 0x01;
 466               		.loc 1 236 0
 467 0218 8093 0000 		sts soft_uart+13,r24
 237:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				soft_uart[1].sample_time = 3;	// begin sampling every third time
 468               		.loc 1 237 0
 469 021c 83E0      		ldi r24,lo8(3)
 470 021e 00C0      		rjmp .L42
 471               	.L29:
 238:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			}
 239:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		}
 240:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		else if (soft_uart[1].rx_state == SU_RX_BYTE)
 472               		.loc 1 240 0
 473 0220 8130      		cpi r24,lo8(1)
 474 0222 01F4      		brne .L31
 241:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		{
 242:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			if(PORTD.IN & PIN7_bm)
 475               		.loc 1 242 0
 476 0224 8091 6806 		lds r24,1640
 477 0228 87FF      		sbrs r24,7
 478 022a 00C0      		rjmp .L32
 243:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			{
 244:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				soft_uart[1].internal_rx_buffer |= soft_uart[1].rx_mask;
 479               		.loc 1 244 0
 480 022c 8091 0000 		lds r24,soft_uart+10
 481 0230 9091 0000 		lds r25,soft_uart+13
 482 0234 892B      		or r24,r25
 483 0236 8093 0000 		sts soft_uart+10,r24
 484               	.L32:
 245:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			}
 246:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			
 247:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			soft_uart[1].rx_mask <<= 1;
 485               		.loc 1 247 0
 486 023a 8091 0000 		lds r24,soft_uart+13
 487 023e 880F      		lsl r24
 488 0240 8093 0000 		sts soft_uart+13,r24
 248:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 
 249:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			if(!soft_uart[1].rx_mask)
 489               		.loc 1 249 0
 490 0244 8111      		cpse r24,__zero_reg__
 491 0246 00C0      		rjmp .L33
 250:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			{
 251:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				soft_uart[1].rx_state = SU_RX_STOP;
 492               		.loc 1 251 0
 493 0248 82E0      		ldi r24,lo8(2)
 494 024a 8093 0000 		sts soft_uart+14,r24
 495               	.L33:
 252:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			}
 253:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			
 254:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			soft_uart[1].sample_time = 2;	
 496               		.loc 1 254 0
 497 024e 82E0      		ldi r24,lo8(2)
 498 0250 00C0      		rjmp .L42
 499               	.L31:
 255:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		}
 256:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		else if (soft_uart[1].rx_state == SU_RX_STOP)
 500               		.loc 1 256 0
 501 0252 8230      		cpi r24,lo8(2)
 502 0254 01F4      		brne .L20
 257:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		{
 258:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			if(PORTD.IN & PIN7_bm)
 503               		.loc 1 258 0
 504 0256 8091 6806 		lds r24,1640
 505 025a 87FF      		sbrs r24,7
 506 025c 00C0      		rjmp .L34
 259:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			{
 260:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				push(soft_uart[1].internal_rx_buffer, soft_uart[1].rx);
 507               		.loc 1 260 0
 508 025e 8091 0000 		lds r24,soft_uart+10
 509 0262 6091 0000 		lds r22,soft_uart+18
 510 0266 7091 0000 		lds r23,soft_uart+18+1
 511 026a 0E94 0000 		call push
 512               	.LVL24:
 261:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 				soft_uart[1].internal_rx_buffer = 0;
 513               		.loc 1 261 0
 514 026e 1092 0000 		sts soft_uart+10,__zero_reg__
 515               	.L34:
 262:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			}
 263:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			
 264:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 			soft_uart[1].rx_state = SU_RX_IDLE;		
 516               		.loc 1 264 0
 517 0272 1092 0000 		sts soft_uart+14,__zero_reg__
 518 0276 00C0      		rjmp .L20
 519               	.L28:
 265:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		}
 266:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	}
 267:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	else
 268:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	{
 269:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 		soft_uart[1].sample_time--;
 520               		.loc 1 269 0
 521 0278 8150      		subi r24,lo8(-(-1))
 522               	.L42:
 523 027a 8093 0000 		sts soft_uart+15,r24
 524               	.L20:
 525               	/* epilogue start */
 270:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** 	}	
 271:/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.c **** }
 526               		.loc 1 271 0
 527 027e FF91      		pop r31
 528 0280 EF91      		pop r30
 529 0282 BF91      		pop r27
 530 0284 AF91      		pop r26
 531 0286 9F91      		pop r25
 532 0288 8F91      		pop r24
 533 028a 7F91      		pop r23
 534 028c 6F91      		pop r22
 535 028e 5F91      		pop r21
 536 0290 4F91      		pop r20
 537 0292 3F91      		pop r19
 538 0294 2F91      		pop r18
 539 0296 0F90      		pop r0
 540 0298 0BBE      		out __RAMPZ__,r0
 541 029a 0F90      		pop r0
 542 029c 0FBE      		out __SREG__,r0
 543 029e 0F90      		pop r0
 544 02a0 1F90      		pop r1
 545 02a2 1895      		reti
 546               	.LFE19:
 548               		.comm	soft_uart,20,1
 811               	.Letext0:
 812               		.file 2 "/usr/lib/gcc/avr/4.7.2/../../../avr/include/stdint.h"
 813               		.file 3 "/usr/lib/gcc/avr/4.7.2/../../../avr/include/avr/iox256a3.h"
 814               		.file 4 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/defs.bbh"
 815               		.file 5 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/circ_buffer.bbh"
 816               		.file 6 "/home/pthalamy/CMU/oldbb/build/src-bobby/hw-block/soft_uart2.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 soft_uart2.c
     /tmp/ccVVN5N2.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccVVN5N2.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccVVN5N2.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccVVN5N2.s:5      *ABS*:000000000000003b __RAMPZ__
     /tmp/ccVVN5N2.s:6      *ABS*:0000000000000034 __CCP__
     /tmp/ccVVN5N2.s:7      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccVVN5N2.s:8      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccVVN5N2.s:13     .text:0000000000000000 timer_set
     /tmp/ccVVN5N2.s:122    .text:000000000000008e configure_soft_uart
     /tmp/ccVVN5N2.s:147    .text:00000000000000a0 init_soft_uart
                            *COM*:0000000000000014 soft_uart
     /tmp/ccVVN5N2.s:209    .text:00000000000000e4 su_getchar
     /tmp/ccVVN5N2.s:258    .text:0000000000000110 set_tx_char
     /tmp/ccVVN5N2.s:285    .text:0000000000000126 su_putchar
     /tmp/ccVVN5N2.s:308    .text:0000000000000136 kbhit
     /tmp/ccVVN5N2.s:337    .text:0000000000000150 __vector_83

UNDEFINED SYMBOLS
__udivmodsi4
__muluhisi3
isEmpty
pop
push
__do_clear_bss
