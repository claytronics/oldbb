   1               		.file	"block.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__CCP__ = 0x34
   7               	__tmp_reg__ = 0
   8               	__zero_reg__ = 1
   9               		.text
  10               	.Ltext0:
  11               	.global	blockTick
  13               	blockTick:
  14               	.LFB6:
  15               		.file 1 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb"
   1:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #include "block.bbh"
   2:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
   3:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #ifdef CLOCK_SYNC
   4:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #include  "clock.bbh"
   5:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #endif
   6:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #ifdef LOG_DEBUG
   7:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #include "log.bbh"
   8:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #endif
   9:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  10:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** threadvar int blockTickRunning = 0;
  11:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  12:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** int accelReady=0;
  13:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  14:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** // BlockTick
  15:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** //
  16:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** // Polling-based hack to step through and update block state, as necessary.
  17:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** //
  18:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** // Much of this can probably be done via ISRs and other state change triggers and this function eli
  19:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** void blockTick()
  20:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** {
  16               		.loc 1 20 0
  17 0000 CF93      		push r28
  18               	.LCFI0:
  19               	/* prologue: function */
  20               	/* frame size = 0 */
  21               	/* stack size = 1 */
  22               	.L__stack_usage = 1
  21:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   byte i;
  22:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   
  23:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #ifdef BBSIM
  24:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   if (this()->destroyed == 1) {
  25:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****     // let neighbors know we are gone
  26:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****     //tellNeighborsDestroyed(this());
  27:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****     // and never do anything again
  28:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****     pauseForever();
  29:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   }
  30:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #endif
  31:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   //int input;
  32:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   blockTickRunning = 1;
  23               		.loc 1 32 0
  24 0002 81E0      		ldi r24,lo8(1)
  25 0004 90E0      		ldi r25,0
  26 0006 8093 0000 		sts blockTickRunning,r24
  27 000a 9093 0000 		sts blockTickRunning+1,r25
  33:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   
  34:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   if(accelReady){
  28               		.loc 1 34 0
  29 000e 8091 0000 		lds r24,accelReady
  30 0012 9091 0000 		lds r25,accelReady+1
  31 0016 892B      		or r24,r25
  32 0018 01F0      		breq .L3
  35:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****     if(newAccelData()){
  33               		.loc 1 35 0
  34 001a 0E94 0000 		call newAccelData
  35               	.LVL0:
  36 001e 892B      		or r24,r25
  37 0020 01F0      		breq .L3
  36:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****       updateAccel();
  38               		.loc 1 36 0
  39 0022 0E94 0000 		call updateAccel
  40               	.LVL1:
  41               	.L3:
  37:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****     }
  38:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   }
  39:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   
  40:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   checkTimeout();
  42               		.loc 1 40 0
  43 0026 0E94 0000 		call checkTimeout
  44               	.LVL2:
  41:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   
  42:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   checkTimer();
  45               		.loc 1 42 0
  46 002a 0E94 0000 		call checkTimer
  47               	.LVL3:
  43:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   
  44:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   for(i = 0; i < NUM_PORTS; ++i)
  48               		.loc 1 44 0
  49 002e C0E0      		ldi r28,0
  50               	.LVL4:
  51               	.L5:
  45:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****     {
  46:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****       // read from serial
  47:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****       processBuffer(i);
  52               		.loc 1 47 0 discriminator 2
  53 0030 8C2F      		mov r24,r28
  54 0032 0E94 0000 		call processBuffer
  55               	.LVL5:
  48:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****       
  49:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****       // active messaging (handle at most one per port)
  50:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****       handleOneMessage();
  56               		.loc 1 50 0 discriminator 2
  57 0036 0E94 0000 		call handleOneMessage
  58               	.LVL6:
  51:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****       
  52:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****       //send packets/ACKS
  53:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****       sendOnSerial(i);
  59               		.loc 1 53 0 discriminator 2
  60 003a 8C2F      		mov r24,r28
  61 003c 0E94 0000 		call sendOnSerial
  62               	.LVL7:
  44:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   for(i = 0; i < NUM_PORTS; ++i)
  63               		.loc 1 44 0 discriminator 2
  64 0040 CF5F      		subi r28,lo8(-(1))
  65               	.LVL8:
  66 0042 C630      		cpi r28,lo8(6)
  67 0044 01F4      		brne .L5
  54:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****     }
  55:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   
  56:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   executeHandlers();	
  68               		.loc 1 56 0
  69 0046 0E94 0000 		call executeHandlers
  70               	.LVL9:
  57:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   blockTickRunning = 0;
  71               		.loc 1 57 0
  72 004a 1092 0000 		sts blockTickRunning,__zero_reg__
  73 004e 1092 0000 		sts blockTickRunning+1,__zero_reg__
  74               	/* epilogue start */
  58:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****   
  59:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** }
  75               		.loc 1 59 0
  76 0052 CF91      		pop r28
  77               	.LVL10:
  78 0054 0895      		ret
  79               	.LFE6:
  81               	.global	initBlock
  83               	initBlock:
  84               	.LFB7:
  60:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  61:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  62:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** // Ties all the horrifying subfunctions together into one simple function
  63:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** void initBlock()
  64:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** {
  85               		.loc 1 64 0
  86               	/* prologue: function */
  87               	/* frame size = 0 */
  88               	/* stack size = 0 */
  89               	.L__stack_usage = 0
  65:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	//software initialization
  66:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	initHandlers();
  90               		.loc 1 66 0
  91 0056 0E94 0000 		call initHandlers
  92               	.LVL11:
  67:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  68:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	//hardware related initialization
  69:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	initTime();
  93               		.loc 1 69 0
  94 005a 0E94 0000 		call initTime
  95               	.LVL12:
  70:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  71:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	initializeMemory();
  96               		.loc 1 71 0
  97 005e 0E94 0000 		call initializeMemory
  98               	.LVL13:
  72:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  73:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	initPorts();
  99               		.loc 1 73 0
 100 0062 0E94 0000 		call initPorts
 101               	.LVL14:
  74:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  75:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #ifdef DEBUG
  76:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	initDebug();
  77:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****     	//printf("System Debug Enabled\r\n");
  78:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #endif
  79:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  80:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	initDataLink();	
 102               		.loc 1 80 0
 103 0066 0E94 0000 		call initDataLink
 104               	.LVL15:
  81:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  82:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****    	initHWLED();
 105               		.loc 1 82 0
 106 006a 0E94 0000 		call initHWLED
 107               	.LVL16:
  83:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	//initAudio();
  84:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  85:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	initSystemMessage();
 108               		.loc 1 85 0
 109 006e 0E94 0000 		call initSystemMessage
 110               	.LVL17:
  86:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	initEnsemble();
 111               		.loc 1 86 0
 112 0072 0E94 0000 		call initEnsemble
 113               	.LVL18:
  87:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  88:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	initBlockTick();		// HW INITIALIZATION ROUTINE
 114               		.loc 1 88 0
 115 0076 0E94 0000 		call initBlockTick
 116               	.LVL19:
  89:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  90:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	initHWAccel();
 117               		.loc 1 90 0
 118 007a 0E94 0000 		call initHWAccel
 119               	.LVL20:
  91:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	accelReady=1;
 120               		.loc 1 91 0
 121 007e 81E0      		ldi r24,lo8(1)
 122 0080 90E0      		ldi r25,0
 123 0082 8093 0000 		sts accelReady,r24
 124 0086 9093 0000 		sts accelReady+1,r25
  92:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
  93:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #ifdef CLOCK_SYNC
  94:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	initClock();
 125               		.loc 1 94 0
 126 008a 0E94 0000 		call initClock
 127               	.LVL21:
  95:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #endif
  96:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #ifdef LOG_DEBUG
  97:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 	initLogDebug();
 128               		.loc 1 97 0
 129 008e 0E94 0000 		call initLogDebug
 130               	.LVL22:
  98:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #endif
  99:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** 
 100:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb **** #ifndef BBSIM
 101:/home/pthalamy/CMU/oldbb/build/src-bobby/system/block.bb ****     initHWMic();
 131               		.loc 1 101 0
 132 0092 0C94 0000 		jmp initHWMic
 133               	.LVL23:
 134               	.LFE7:
 136               	.global	accelReady
 137               		.section .bss
 140               	accelReady:
 141 0000 0000      		.zero	2
 142               	.global	blockTickRunning
 145               	blockTickRunning:
 146 0002 0000      		.zero	2
 187               	.Letext0:
 188               		.file 2 "/usr/lib/gcc/avr/4.7.2/../../../avr/include/stdint.h"
 189               		.file 3 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/defs.bbh"
 190               		.file 4 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/serial.bbh"
 191               		.file 5 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/accelerometer.bbh"
 192               		.file 6 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/hardwaretime.bbh"
 193               		.file 7 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/data_link.bbh"
 194               		.file 8 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/../hw-api/hwDataLink.h"
 195               		.file 9 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/handler.bbh"
 196               		.file 10 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/memory.bbh"
 197               		.file 11 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/../hw-api/hwLED.h"
 198               		.file 12 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/message.bbh"
 199               		.file 13 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/ensemble.bbh"
 200               		.file 14 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/../hw-api/hwBlockTick.h"
 201               		.file 15 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/../hw-api/hwAccelerometer.h"
 202               		.file 16 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/clock.bbh"
 203               		.file 17 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/log.bbh"
 204               		.file 18 "/home/pthalamy/CMU/oldbb/build/src-bobby/system/../hw-api/hwMicrophone.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 block.c
     /tmp/ccFjeNnq.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccFjeNnq.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccFjeNnq.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccFjeNnq.s:5      *ABS*:000000000000003b __RAMPZ__
     /tmp/ccFjeNnq.s:6      *ABS*:0000000000000034 __CCP__
     /tmp/ccFjeNnq.s:7      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccFjeNnq.s:8      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccFjeNnq.s:13     .text:0000000000000000 blockTick
     /tmp/ccFjeNnq.s:145    .bss:0000000000000002 blockTickRunning
     /tmp/ccFjeNnq.s:140    .bss:0000000000000000 accelReady
     /tmp/ccFjeNnq.s:83     .text:0000000000000056 initBlock

UNDEFINED SYMBOLS
newAccelData
updateAccel
checkTimeout
checkTimer
processBuffer
handleOneMessage
sendOnSerial
executeHandlers
initHandlers
initTime
initializeMemory
initPorts
initDataLink
initHWLED
initSystemMessage
initEnsemble
initBlockTick
initHWAccel
initClock
initLogDebug
initHWMic
__do_clear_bss
