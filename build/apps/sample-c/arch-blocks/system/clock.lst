   1               		.file	"clock.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__CCP__ = 0x34
   7               	__tmp_reg__ = 0
   8               	__zero_reg__ = 1
   9               		.text
  10               	.Ltext0:
  11               	.global	freeClockChunk
  13               	freeClockChunk:
  14               	.LFB32:
  15               		.file 1 "/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb"
   1:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #include "clock.bbh"
   2:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #include "ensemble.bbh"
   3:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #include "data_link.bbh"
   4:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
   5:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #include <math.h>
   6:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
   7:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef LOG_DEBUG
   8:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #include "log.bbh"
   9:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
  10:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  11:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #define PRINT_BBSIM(...) //printf(__VA_ARGS__)
  12:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #define PRINT_BBSIM2(...) //printf(__VA_ARGS__)
  13:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  14:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** //#define DO_NOT_START_BEFORE_BEING_SYNCHRONIZED
  15:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  16:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** //#define STATIC_TIME_LEADER
  17:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #define MIN_ID_TIME_LEADER
  18:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  19:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** //#define TEST_LINEAR_CORRECTION
  20:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** //#define	IGNORE_AFTER 10
  21:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #define LINEAR_CORRECTION
  22:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #define RESET_SLOPE_AFTER 5
  23:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** //#define REAL_LINEAR_MODEL
  24:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  25:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #define SYNC_PERIOD	(3000)
  26:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #define CLOCK_VALIDITY_PERIOD (5*1000)
  27:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #define ESTIMATED_TRANSMISSION_DELAY 6
  28:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  29:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** // clock message format:
  30:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** //	<CLOCK_SYNC_MSG> <TYPE> <parameters ... >
  31:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  32:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** // TIME LEADER MANAGEMENT
  33:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  34:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void timeLeaderSubRoutine(void);
  35:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void setLeader(void);
  36:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void setSlave(void);
  37:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  38:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef STATIC_TIME_LEADER
  39:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#define WAVE
  40:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef BBSIM
  41:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#define TIME_LEADER_ID 2
  42:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #else
  43:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#define TIME_LEADER_ID 257
  44:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
  45:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
  46:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #elif defined MIN_ID_TIME_LEADER
  47:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	// 	Parameters <id (2 bytes)>
  48:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#define MIN_ID_TIME_LEADER_ELECTION_GO_MSG 1
  49:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	// 	Parameters <id (2 bytes)> <answer (1 byte)>
  50:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#define MIN_ID_TIME_LEADER_ELECTION_BACK_MSG 2
  51:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#define LEADER_ELECTION_TIMEOUT 500
  52:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
  53:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#define SPANNING_TREE
  54:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
  55:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	threadvar byte isLeader = 0;
  56:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	threadvar byte electing = 0;
  57:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
  58:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	threadvar PRef minIdSender;
  59:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	threadvar uint16_t minId;
  60:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	threadvar byte nbNeededAnswers;
  61:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	threadvar Timeout leaderElectionTimeOut;
  62:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
  63:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte sendBackMsg(PRef p, byte a);
  64:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte sendGoMsg(PRef p, uint16_t id);
  65:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte broadcastGoMsg(PRef p, uint16_t id);
  66:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	void startLeaderElection(void);
  67:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	void scheduleLeaderElection(void);
  68:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
  69:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  70:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** // CLOCK/SYNCHRONIZATION MANAGEMENT:
  71:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #define CLOCK_INFO 3
  72:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** // 	Parameters [<wave id (2 bytes) >] <send time (4 bytes) > <receive time (4 bytes)>
  73:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #define REQUEST_CLOCK_SYNC 4
  74:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  75:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef WAVE
  76:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#define WAVE_ID_INDEX 2
  77:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#define SEND_TIME_INDEX 4
  78:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#define RECEIVE_TIME_INDEX (SEND_TIME_INDEX+sizeof(Time))
  79:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #else	
  80:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#define SEND_TIME_INDEX 2
  81:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#define RECEIVE_TIME_INDEX (SEND_TIME_INDEX+sizeof(Time))
  82:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
  83:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  84:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef LINEAR_CORRECTION
  85:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	threadvar double speedAvg = 0.0;
  86:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	threadvar Time firstCalibSend = 0;
  87:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	threadvar unsigned int nbSync = 0;
  88:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
  89:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  90:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** threadvar int32_t offset = 0;
  91:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** threadvar Time firstCalibRec = 0;
  92:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** threadvar Time localClockMaxReach = 0;
  93:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** threadvar Timer syncTimer;
  94:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
  95:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef WAVE
  96:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** threadvar uint16_t lastWaveId = 0;
  97:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** threadvar byte syncBy = NUM_PORTS;
  98:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte launchSynchronizationWave(void);
  99:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #elif defined SPANNING_TREE
 100:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** threadvar PRef syncChildren[NUM_PORTS];
 101:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void initSTChildren(void);
 102:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 103:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 104:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void freeClockChunk(void);
 105:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte broadcastClockChunk(PRef excludedPort, byte *d, byte s);
 106:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte sendClockChunk(PRef p, byte *d, byte s);
 107:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte requestSync(PRef p);
 108:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 109:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void initClock(void)
 110:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 111:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	offset = 0;
 112:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	firstCalibRec = 0;
 113:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	localClockMaxReach = 0;
 114:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 115:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef LINEAR_CORRECTION
 116:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	speedAvg = 1.0;
 117:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	firstCalibSend = 0;
 118:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	nbSync = 0;
 119:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 120:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 121:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef WAVE
 122:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	lastWaveId = 0;
 123:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	syncBy = NUM_PORTS;
 124:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #elif defined SPANNING_TREE
 125:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	initSTChildren();
 126:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 127:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 128:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef STATIC_TIME_LEADER
 129:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if (isTimeLeader()) {
 130:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		setLeader();
 131:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 132:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #elif defined MIN_ID_TIME_LEADER
 133:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	minIdSender = 255;
 134:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	minId = getGUID();
 135:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	electing = 0;
 136:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	setSlave();
 137:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	scheduleLeaderElection();
 138:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 139:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** /*
 140:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef DO_NOT_START_BEFORE_BEING_SYNCHRONIZED
 141:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	setColor(WHITE);
 142:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte data[2];
 143:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 144:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[0] = CLOCK_SYNC_MSG;
 145:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[1] = REQUEST_CLOCK_SYNC;
 146:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 147:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	while (!isSynchronized()) {
 148:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		broadcastClockChunk(255, data, 2);
 149:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		delayMS(6);
 150:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 151:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif */
 152:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 153:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 154:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void printSlope(void)
 155:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 156:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** /*#ifdef LOG_DEBUG
 157:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	char s[150];
 158:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	snprintf(s, 150*sizeof(char), "speedAvg: %f", speedAvg);
 159:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	s[149] = '\0';
 160:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	printDebug(s);
 161:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif*/
 162:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 163:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 164:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** Time getClockForTime(Time t)
 165:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 166:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef LINEAR_CORRECTION
 167:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return ((double)t*speedAvg) + offset;
 168:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #else
 169:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return t + offset;
 170:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 171:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 172:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 173:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** Time getEstimatedGlobalClock(void)
 174:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 175:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef LINEAR_CORRECTION
 176:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return ((double)getTime()*speedAvg) + offset;
 177:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #else
 178:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return getTime() + offset;
 179:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 180:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 181:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 182:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** Time getClock(void) {
 183:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return fmax(getEstimatedGlobalClock(), localClockMaxReach);
 184:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 185:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 186:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte isTimeLeader(void)
 187:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 188:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 189:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef STATIC_TIME_LEADER
 190:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return (getGUID() == TIME_LEADER_ID);
 191:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #elif defined MIN_ID_TIME_LEADER
 192:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return isLeader;
 193:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 194:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 195:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 196:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte isElecting(void) {
 197:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef MIN_ID_TIME_LEADER
 198:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return electing;
 199:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #else
 200:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return 0;
 201:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 202:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 203:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 204:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte handleClockSyncMessage(void)
 205:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 206:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if (thisChunk == NULL) 
 207:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 208:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		return 0;
 209:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 210:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb ****     
 211:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	switch(thisChunk->data[1])
 212:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 213:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		case CLOCK_INFO:
 214:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		{
 215:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			Time sendTime;
 216:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			Time receiveTime;
 217:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			Time estimatedGlobalTime;
 218:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 219:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			PRINT_BBSIM("block %u: clock info\n", getGUID()); 
 220:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef WAVE
 221:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			uint16_t waveId = 0;
 222:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			waveId  = (uint16_t)(thisChunk->data[WAVE_ID_INDEX+1]) & 0xFF;
 223:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			waveId |= ((uint16_t)(thisChunk->data[WAVE_ID_INDEX]) << 8) & 0xFF00;
 224:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			
 225:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if (lastWaveId >= waveId) {
 226:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				PRINT_BBSIM("ko1 %d < %d\n", (int) lastWaveId, (int) waveId);
 227:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				return 1;
 228:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			}
 229:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			lastWaveId = waveId;
 230:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			syncBy = faceNum(thisChunk);
 231:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif		
 232:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			
 233:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			sendTime  = (Time)(thisChunk->data[SEND_TIME_INDEX+3]) & 0xFF;
 234:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			sendTime |= ((Time)(thisChunk->data[SEND_TIME_INDEX+2]) << 8) & 0xFF00;
 235:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			sendTime |= ((Time)(thisChunk->data[SEND_TIME_INDEX+1]) << 16) & 0xFF0000;
 236:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			sendTime |= ((Time)(thisChunk->data[SEND_TIME_INDEX]) << 24)  & 0xFF000000;
 237:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 238:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			receiveTime  = (Time)(thisChunk->data[RECEIVE_TIME_INDEX+3]) & 0xFF;
 239:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			receiveTime |= ((Time)(thisChunk->data[RECEIVE_TIME_INDEX+2]) << 8) & 0xFF00;
 240:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			receiveTime |= ((Time)(thisChunk->data[RECEIVE_TIME_INDEX+1]) << 16) & 0xFF0000;
 241:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			receiveTime |= ((Time)(thisChunk->data[RECEIVE_TIME_INDEX]) << 24)  & 0xFF000000;
 242:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			
 243:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			localClockMaxReach = fmax(getClock(), localClockMaxReach);
 244:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			estimatedGlobalTime = sendTime + ESTIMATED_TRANSMISSION_DELAY;
 245:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 246:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef LOG_DEBUG
 247:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			char s[150];
 248:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			snprintf(s, 150*sizeof(char), "s: %lu, r: %lu, c: %lu, sp: %f", estimatedGlobalTime, receiveTime
 249:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			s[149] = '\0';
 250:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			printDebug(s);
 251:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 252:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 253:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef LINEAR_CORRECTION
 254:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#ifdef TEST_LINEAR_CORRECTION
 255:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		if(nbSync < IGNORE_AFTER) {
 256:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#endif
 257:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			nbSync++;
 258:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if ((nbSync == 1) || ( (getTime() - firstCalibRec) < (SYNC_PERIOD/2))) {
 259:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				offset = estimatedGlobalTime - receiveTime;
 260:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				firstCalibSend = estimatedGlobalTime;
 261:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				firstCalibRec = receiveTime;
 262:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			} else {
 263:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				//double n = (double) nbSync;
 264:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				//speedAvg = (speedAvg*(n-1) + observedSpeed) / n;
 265:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				speedAvg = ((double) (estimatedGlobalTime - firstCalibSend))/ ((double) (receiveTime - firstCal
 266:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				offset = round(estimatedGlobalTime - (speedAvg*((double)getTime())));
 267:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				#ifdef RESET_SLOPE_AFTER
 268:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				if ((nbSync % RESET_SLOPE_AFTER) == 0 ) 
 269:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				{
 270:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					firstCalibSend = estimatedGlobalTime;
 271:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					firstCalibRec = receiveTime;
 272:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				}
 273:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				#endif
 274:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			}
 275:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 						
 276:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			PRINT_BBSIM("block %u: clock info at time %lu (clock %lu), speed average %f, off %d\n", getGUID(
 277:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			
 278:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#ifdef TEST_LINEAR_CORRECTION
 279:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		}
 280:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	#endif
 281:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #else
 282:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			offset = estimatedGlobalTime - receiveTime;
 283:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 284:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** /*#ifdef LOG_DEBUG
 285:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			char s[150];
 286:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			snprintf(s, 150*sizeof(char), "s: %lu, r: %lu, o: %d, t: %lu, c: %lu", sendTime, receiveTime, of
 287:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			s[149] = '\0';
 288:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			printDebug(s);
 289:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif*/
 290:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			synchronizeNeighbors();
 291:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			break;
 292:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		}
 293:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		
 294:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		case REQUEST_CLOCK_SYNC :
 295:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		{	PRINT_BBSIM("block %u: sync request from %u\n", getGUID(), thisNeighborhood.n[faceNum(thisChunk
 296:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if(isSynchronized())
 297:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			{
 298:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				synchronizeNeighbor(faceNum(thisChunk));
 299:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			}
 300:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			break;
 301:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		}
 302:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef MIN_ID_TIME_LEADER
 303:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		case MIN_ID_TIME_LEADER_ELECTION_GO_MSG :
 304:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		{
 305:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			uint16_t id = charToGUID(&(thisChunk->data[2]));
 306:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			
 307:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if (!electing)
 308:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			{
 309:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				PRINT_BBSIM("block %u: go msg - election\n", getGUID()); 
 310:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				deregisterTimeout(&leaderElectionTimeOut);
 311:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				startLeaderElection();
 312:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			}
 313:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			
 314:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if (id == minId)
 315:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			{
 316:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				sendBackMsg(faceNum(thisChunk), 0);
 317:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			}
 318:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if (id < minId)
 319:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			{
 320:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				minId = id;
 321:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				minIdSender = faceNum(thisChunk);
 322:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				initSTChildren();
 323:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				nbNeededAnswers = broadcastGoMsg(faceNum(thisChunk), id);
 324:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				
 325:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				if (nbNeededAnswers == 0) 
 326:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				{
 327:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					electing = 0;
 328:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					if (minId == getGUID())
 329:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					{
 330:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 						setLeader();
 331:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					}
 332:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					else 
 333:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					{
 334:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 						sendBackMsg(faceNum(thisChunk), 1);
 335:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					}
 336:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				}
 337:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			}
 338:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			break;
 339:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		}
 340:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		case MIN_ID_TIME_LEADER_ELECTION_BACK_MSG :
 341:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		{
 342:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			uint16_t id = charToGUID(&(thisChunk->data[2]));
 343:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			
 344:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if (id == minId)
 345:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			{
 346:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				nbNeededAnswers--;
 347:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				syncChildren[faceNum(thisChunk)] = thisChunk->data[4];
 348:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				if (nbNeededAnswers == 0)
 349:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				{
 350:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					electing = 0;
 351:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					if (id == getGUID())
 352:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					{
 353:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 						setLeader();
 354:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					}
 355:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					else
 356:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					{
 357:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 						sendBackMsg(minIdSender, 1);
 358:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					}
 359:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				}
 360:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			}
 361:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			break;
 362:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		}
 363:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 364:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 365:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return 1;
 366:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 367:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 368:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte handleNeighborChange(PRef p)
 369:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 370:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	PRINT_BBSIM("Neighbor change at Time %u\n", getTime());
 371:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef MIN_ID_TIME_LEADER
 372:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	electing = 0;
 373:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if (!electing)
 374:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 375:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		scheduleLeaderElection();
 376:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 377:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 378:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 379:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef WAVE
 380:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if (thisNeighborhood.n[p] == PRESENT)
 381:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 382:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		
 383:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		PRINT_BBSIM("block %u: isSynchronized? = %u\n", getGUID(), isSynchronized());
 384:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		if (isSynchronized()) {
 385:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			PRINT_BBSIM("block %u: sync new neighbor %u\n", getGUID(), thisNeighborhood.n[p]);
 386:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			//synchronizeNeighbor(p);
 387:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		}
 388:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		 else {
 389:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			PRINT_BBSIM("block %u: request sync %u\n", getGUID(), thisNeighborhood.n[p]);
 390:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			requestSync(p);
 391:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		}
 392:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 393:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 394:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return 0;
 395:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 396:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 397:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte isAClockSyncMessage(Chunk *c)
 398:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {	
 399:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if ((*((MsgHandler*)c->handler) == RES_SYS_HANDLER) && (c->data[0] == CLOCK_SYNC_MSG) && (c->data[
 400:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 401:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		return 1;
 402:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 403:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return 0;
 404:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 405:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 406:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** /******************************************************
 407:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb ****  * Clock (Time) Synchronization Functions
 408:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb ****  *****************************************************/
 409:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 410:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void insertReceiveTime(Chunk *c)
 411:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 412:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	Time t = getTime();
 413:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 414:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	//PRINT_BBSIM("insert receive time: %u\n", t);
 415:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[RECEIVE_TIME_INDEX+3] = (byte) (t & 0xFF);
 416:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[RECEIVE_TIME_INDEX+2] = (byte) ((t >>  8) & 0xFF);
 417:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[RECEIVE_TIME_INDEX+1] = (byte) ((t >> 16) & 0xFF);
 418:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[RECEIVE_TIME_INDEX] = (byte) ((t >> 24) & 0xFF);
 419:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 420:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 421:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void insertSendTime(Chunk *c)
 422:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 423:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	Time t = getEstimatedGlobalClock(); // Global Clock
 424:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 425:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	//PRINT_BBSIM("insert send time: %u\n", t);
 426:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[SEND_TIME_INDEX+3] = (byte) (t & 0xFF);
 427:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[SEND_TIME_INDEX+2] = (byte) ((t >>  8) & 0xFF);
 428:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[SEND_TIME_INDEX+1] = (byte) ((t >> 16) & 0xFF);
 429:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[SEND_TIME_INDEX] = (byte) ((t >> 24) & 0xFF);
 430:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 431:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 432:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte requestSync(PRef p)
 433:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 434:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte data[2];
 435:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 436:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[0] = CLOCK_SYNC_MSG;
 437:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[1] = REQUEST_CLOCK_SYNC;
 438:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 439:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	//return 1;
 440:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return sendClockChunk(p, data, 2);
 441:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 442:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 443:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte synchronizeNeighbor(PRef p)
 444:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 445:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte data[4];
 446:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 447:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[0] = CLOCK_SYNC_MSG;
 448:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[1] = CLOCK_INFO;
 449:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef WAVE
 450:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[WAVE_ID_INDEX+1] = (byte) (lastWaveId & 0xFF);
 451:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[WAVE_ID_INDEX] = (byte) ((lastWaveId >>  8) & 0xFF);
 452:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return sendClockChunk(p, data, 4);
 453:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #elif defined SPANNING_TREE
 454:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return sendClockChunk(p, data, 2);
 455:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 456:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 457:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 458:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte synchronizeNeighbors(void)
 459:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 460:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte p;
 461:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte n = 0;
 462:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 463:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	PRINT_BBSIM("block %u: synchronizes its neighbors\n", getGUID());
 464:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 465:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifndef SPANNING_TREE
 466:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	for( p = 0; p < NUM_PORTS; p++)
 467:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 468:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		if ((p == syncBy) || (thisNeighborhood.n[p] == VACANT))
 469:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		{
 470:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			continue;
 471:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		}
 472:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		synchronizeNeighbor(p);
 473:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		n++;
 474:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 475:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #else
 476:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	for( p = 0; p < NUM_PORTS; p++)
 477:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 478:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		if ((syncChildren[p] == 0) || (thisNeighborhood.n[p] == VACANT))
 479:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		{
 480:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			continue;
 481:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		}
 482:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		synchronizeNeighbor(p);
 483:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		n++;
 484:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 485:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 486:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return n;
 487:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 488:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 489:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte isSynchronized(void)
 490:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 491:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return (isTimeLeader() || (firstCalibRec > 0));
 492:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	//return (isTimeLeader() || ( (firstCalibRec != 0) && ((getEstimatedLocalClock() - firstCalibRec) 
 493:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 494:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 495:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef WAVE
 496:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte launchSynchronizationWave(void)
 497:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 498:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	lastWaveId++;
 499:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return synchronizeNeighbors();
 500:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 501:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 502:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #elif defined SPANNING_TREE
 503:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 504:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void initSTChildren(void)
 505:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 506:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte p;
 507:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 508:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	for (p = 0; p < NUM_PORTS; p++)
 509:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 510:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		syncChildren[p] = 0;
 511:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 512:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 513:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 514:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 515:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** /******************************************************
 516:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb ****  * Time Leader Election Functions
 517:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb ****  *****************************************************/
 518:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 519:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void setLeader(void) {
 520:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 521:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	PRINT_BBSIM2("block %u: leader!\n", getGUID());
 522:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef MIN_ID_TIME_LEADER
 523:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	isLeader = 1;
 524:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 525:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	syncTimer.period = SYNC_PERIOD;
 526:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef WAVE
 527:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	syncTimer.t.callback = (GenericHandler)&launchSynchronizationWave;
 528:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	launchSynchronizationWave();
 529:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #elif defined SPANNING_TREE
 530:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	syncTimer.t.callback = (GenericHandler)&synchronizeNeighbors;
 531:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	synchronizeNeighbors();
 532:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 533:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	registerTimer(&(syncTimer));
 534:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	enableTimer(syncTimer);
 535:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 536:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 537:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void setSlave(void) {
 538:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	//PRINT_BBSIM("block %u: de-elected!\n", getGUID());
 539:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef MIN_ID_TIME_LEADER
 540:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	isLeader = 0;
 541:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 542:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	disableTimer(syncTimer);
 543:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	deregisterTimer(&syncTimer);
 544:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	deregisterTimeout(&(syncTimer.t));
 545:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 546:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 547:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #ifdef MIN_ID_TIME_LEADER
 548:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte sendBackMsg(PRef p, byte a)
 549:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 550:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte data[5];
 551:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 552:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[0] = CLOCK_SYNC_MSG;
 553:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[1] = MIN_ID_TIME_LEADER_ELECTION_BACK_MSG;
 554:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	GUIDIntoChar(minId, &(data[2]));
 555:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[4] = a;
 556:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 557:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return sendClockChunk(p, data, 5);
 558:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 559:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 560:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte sendGoMsg(PRef p, uint16_t id)
 561:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 562:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte data[4];
 563:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 564:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[0] = CLOCK_SYNC_MSG;
 565:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[1] = MIN_ID_TIME_LEADER_ELECTION_GO_MSG;
 566:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	GUIDIntoChar(id, &(data[2]));
 567:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 568:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return sendClockChunk(p, data, 4);
 569:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 570:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 571:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte broadcastGoMsg(PRef p, uint16_t id)
 572:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 573:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte data[4];
 574:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 575:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[0] = CLOCK_SYNC_MSG;
 576:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[1] = MIN_ID_TIME_LEADER_ELECTION_GO_MSG;
 577:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	GUIDIntoChar(id, &(data[2]));
 578:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 579:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return broadcastClockChunk(p, data, 4);
 580:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 581:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 582:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void scheduleLeaderElection(void)
 583:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 584:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if (!electing)
 585:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 586:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		deregisterTimeout(&leaderElectionTimeOut);
 587:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		leaderElectionTimeOut.calltime = getTime() + LEADER_ELECTION_TIMEOUT;
 588:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		leaderElectionTimeOut.callback = (GenericHandler)(&startLeaderElection);
 589:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		registerTimeout(&leaderElectionTimeOut);
 590:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 591:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	else
 592:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 593:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		//printf("too late!\n");
 594:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 595:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 596:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 597:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void startLeaderElection(void)
 598:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 599:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	//static int i = 0;
 600:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	//i++;
 601:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	//printf("block %u: start election function at %u\n", getGUID(), getTime());
 602:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	//printf("%d election\n", i);
 603:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if (!electing) {
 604:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	//	printf("block %u: start - election\n", getGUID()); 
 605:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		setSlave();
 606:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		minId = getGUID();
 607:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		minIdSender = 255;
 608:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		electing = 1;
 609:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		initSTChildren();
 610:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		nbNeededAnswers = broadcastGoMsg(255, getGUID());
 611:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		if (nbNeededAnswers == 0) 
 612:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		{
 613:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			electing = 0;
 614:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if (minId == getGUID())
 615:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			{
 616:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				//printf("block %u: direct win\n", getGUID());
 617:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				setLeader();
 618:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			}
 619:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			else 
 620:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			{
 621:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				sendBackMsg(minIdSender, 1);
 622:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			}
 623:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		}
 624:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 625:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 626:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 627:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** #endif
 628:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 629:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** /******************************************************
 630:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb ****  * Chunk Management Functions
 631:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb ****  *****************************************************/
 632:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 633:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void freeClockChunk(void)
 634:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
  16               		.loc 1 634 0
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19               	/* stack size = 0 */
  20               	.L__stack_usage = 0
 635:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	free(thisChunk);
  21               		.loc 1 635 0
  22 0000 8091 0000 		lds r24,thisChunk
  23 0004 9091 0000 		lds r25,thisChunk+1
  24 0008 0C94 0000 		jmp free
  25               	.LVL0:
  26               	.LFE32:
  28               	.global	printSlope
  30               	printSlope:
  31               	.LFB9:
 155:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
  32               		.loc 1 155 0
  33               	/* prologue: function */
  34               	/* frame size = 0 */
  35               	/* stack size = 0 */
  36               	.L__stack_usage = 0
  37 000c 0895      		ret
  38               	.LFE9:
  40               	.global	__floatunsisf
  41               	.global	__mulsf3
  42               	.global	__floatsisf
  43               	.global	__addsf3
  44               	.global	__fixunssfsi
  45               	.global	getClockForTime
  47               	getClockForTime:
  48               	.LFB10:
 165:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
  49               		.loc 1 165 0
  50               	.LVL1:
 165:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
  51               		.loc 1 165 0
  52 000e CF92      		push r12
  53               	.LCFI0:
  54 0010 DF92      		push r13
  55               	.LCFI1:
  56 0012 EF92      		push r14
  57               	.LCFI2:
  58 0014 FF92      		push r15
  59               	.LCFI3:
  60               	/* prologue: function */
  61               	/* frame size = 0 */
  62               	/* stack size = 4 */
  63               	.L__stack_usage = 4
 167:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return ((double)t*speedAvg) + offset;
  64               		.loc 1 167 0
  65 0016 0E94 0000 		call __floatunsisf
  66               	.LVL2:
  67 001a 2091 0000 		lds r18,speedAvg
  68 001e 3091 0000 		lds r19,speedAvg+1
  69 0022 4091 0000 		lds r20,speedAvg+2
  70 0026 5091 0000 		lds r21,speedAvg+3
  71 002a 0E94 0000 		call __mulsf3
  72               	.LVL3:
  73 002e 6B01      		movw r12,r22
  74 0030 7C01      		movw r14,r24
  75 0032 6091 0000 		lds r22,offset
  76 0036 7091 0000 		lds r23,offset+1
  77 003a 8091 0000 		lds r24,offset+2
  78 003e 9091 0000 		lds r25,offset+3
  79 0042 0E94 0000 		call __floatsisf
  80               	.LVL4:
  81 0046 9B01      		movw r18,r22
  82 0048 AC01      		movw r20,r24
  83 004a C701      		movw r24,r14
  84 004c B601      		movw r22,r12
  85 004e 0E94 0000 		call __addsf3
  86               	.LVL5:
  87 0052 0E94 0000 		call __fixunssfsi
  88               	.LVL6:
  89               	/* epilogue start */
 171:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
  90               		.loc 1 171 0
  91 0056 FF90      		pop r15
  92 0058 EF90      		pop r14
  93 005a DF90      		pop r13
  94 005c CF90      		pop r12
  95 005e 0895      		ret
  96               	.LFE10:
  98               	.global	getEstimatedGlobalClock
 100               	getEstimatedGlobalClock:
 101               	.LFB11:
 174:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 102               		.loc 1 174 0
 103 0060 CF92      		push r12
 104               	.LCFI4:
 105 0062 DF92      		push r13
 106               	.LCFI5:
 107 0064 EF92      		push r14
 108               	.LCFI6:
 109 0066 FF92      		push r15
 110               	.LCFI7:
 111               	/* prologue: function */
 112               	/* frame size = 0 */
 113               	/* stack size = 4 */
 114               	.L__stack_usage = 4
 176:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return ((double)getTime()*speedAvg) + offset;
 115               		.loc 1 176 0
 116 0068 0E94 0000 		call getTime
 117               	.LVL7:
 118 006c 0E94 0000 		call __floatunsisf
 119               	.LVL8:
 120 0070 2091 0000 		lds r18,speedAvg
 121 0074 3091 0000 		lds r19,speedAvg+1
 122 0078 4091 0000 		lds r20,speedAvg+2
 123 007c 5091 0000 		lds r21,speedAvg+3
 124 0080 0E94 0000 		call __mulsf3
 125               	.LVL9:
 126 0084 6B01      		movw r12,r22
 127 0086 7C01      		movw r14,r24
 128 0088 6091 0000 		lds r22,offset
 129 008c 7091 0000 		lds r23,offset+1
 130 0090 8091 0000 		lds r24,offset+2
 131 0094 9091 0000 		lds r25,offset+3
 132 0098 0E94 0000 		call __floatsisf
 133               	.LVL10:
 134 009c 9B01      		movw r18,r22
 135 009e AC01      		movw r20,r24
 136 00a0 C701      		movw r24,r14
 137 00a2 B601      		movw r22,r12
 138 00a4 0E94 0000 		call __addsf3
 139               	.LVL11:
 140 00a8 0E94 0000 		call __fixunssfsi
 141               	.LVL12:
 142               	/* epilogue start */
 180:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 143               		.loc 1 180 0
 144 00ac FF90      		pop r15
 145 00ae EF90      		pop r14
 146 00b0 DF90      		pop r13
 147 00b2 CF90      		pop r12
 148 00b4 0895      		ret
 149               	.LFE11:
 151               	.global	getClock
 153               	getClock:
 154               	.LFB12:
 182:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** Time getClock(void) {
 155               		.loc 1 182 0
 156 00b6 CF93      		push r28
 157               	.LCFI8:
 158 00b8 DF93      		push r29
 159               	.LCFI9:
 160 00ba 00D0      		rcall .
 161 00bc 1F92      		push __zero_reg__
 162               	.LCFI10:
 163 00be CDB7      		in r28,__SP_L__
 164 00c0 DEB7      		in r29,__SP_H__
 165               	.LCFI11:
 166               	/* prologue: function */
 167               	/* frame size = 4 */
 168               	/* stack size = 6 */
 169               	.L__stack_usage = 6
 183:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return fmax(getEstimatedGlobalClock(), localClockMaxReach);
 170               		.loc 1 183 0
 171 00c2 6091 0000 		lds r22,localClockMaxReach
 172 00c6 7091 0000 		lds r23,localClockMaxReach+1
 173 00ca 8091 0000 		lds r24,localClockMaxReach+2
 174 00ce 9091 0000 		lds r25,localClockMaxReach+3
 175 00d2 0E94 0000 		call __floatunsisf
 176               	.LVL13:
 177 00d6 9B01      		movw r18,r22
 178 00d8 AC01      		movw r20,r24
 179 00da 6983      		std Y+1,r22
 180 00dc 3A83      		std Y+2,r19
 181 00de 4B83      		std Y+3,r20
 182 00e0 5C83      		std Y+4,r21
 183 00e2 0E94 0000 		call getEstimatedGlobalClock
 184               	.LVL14:
 185 00e6 0E94 0000 		call __floatunsisf
 186               	.LVL15:
 187 00ea 2981      		ldd r18,Y+1
 188 00ec 3A81      		ldd r19,Y+2
 189 00ee 4B81      		ldd r20,Y+3
 190 00f0 5C81      		ldd r21,Y+4
 191 00f2 0E94 0000 		call fmax
 192               	.LVL16:
 193 00f6 0E94 0000 		call __fixunssfsi
 194               	.LVL17:
 195               	/* epilogue start */
 184:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 196               		.loc 1 184 0
 197 00fa 2496      		adiw r28,4
 198 00fc CDBF      		out __SP_L__,r28
 199 00fe DEBF      		out __SP_H__,r29
 200 0100 DF91      		pop r29
 201 0102 CF91      		pop r28
 202 0104 0895      		ret
 203               	.LFE12:
 205               	.global	isTimeLeader
 207               	isTimeLeader:
 208               	.LFB13:
 187:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 209               		.loc 1 187 0
 210               	/* prologue: function */
 211               	/* frame size = 0 */
 212               	/* stack size = 0 */
 213               	.L__stack_usage = 0
 194:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 214               		.loc 1 194 0
 215 0106 8091 0000 		lds r24,isLeader
 216 010a 0895      		ret
 217               	.LFE13:
 219               	.global	isElecting
 221               	isElecting:
 222               	.LFB14:
 196:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte isElecting(void) {
 223               		.loc 1 196 0
 224               	/* prologue: function */
 225               	/* frame size = 0 */
 226               	/* stack size = 0 */
 227               	.L__stack_usage = 0
 202:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 228               		.loc 1 202 0
 229 010c 8091 0000 		lds r24,electing
 230 0110 0895      		ret
 231               	.LFE14:
 233               	.global	isAClockSyncMessage
 235               	isAClockSyncMessage:
 236               	.LFB17:
 398:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {	
 237               		.loc 1 398 0
 238               	.LVL18:
 239               	/* prologue: function */
 240               	/* frame size = 0 */
 241               	/* stack size = 0 */
 242               	.L__stack_usage = 0
 243 0112 FC01      		movw r30,r24
 399:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if ((*((MsgHandler*)c->handler) == RES_SYS_HANDLER) && (c->data[0] == CLOCK_SYNC_MSG) && (c->data[
 244               		.loc 1 399 0
 245 0114 8489      		ldd r24,Z+20
 246 0116 9589      		ldd r25,Z+21
 247               	.LVL19:
 248 0118 892B      		or r24,r25
 249 011a 01F4      		brne .L12
 399:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if ((*((MsgHandler*)c->handler) == RES_SYS_HANDLER) && (c->data[0] == CLOCK_SYNC_MSG) && (c->data[
 250               		.loc 1 399 0 is_stmt 0 discriminator 1
 251 011c 8081      		ld r24,Z
 252 011e 8036      		cpi r24,lo8(96)
 253 0120 01F4      		brne .L12
 254 0122 81E0      		ldi r24,lo8(1)
 255 0124 9181      		ldd r25,Z+1
 256 0126 9330      		cpi r25,lo8(3)
 257 0128 01F0      		breq .L9
 258               	.L12:
 403:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return 0;
 259               		.loc 1 403 0 is_stmt 1
 260 012a 80E0      		ldi r24,0
 261               	.L9:
 404:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 262               		.loc 1 404 0
 263 012c 0895      		ret
 264               	.LFE17:
 266               	.global	insertReceiveTime
 268               	insertReceiveTime:
 269               	.LFB18:
 411:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 270               		.loc 1 411 0
 271               	.LVL20:
 272 012e CF93      		push r28
 273               	.LCFI12:
 274 0130 DF93      		push r29
 275               	.LCFI13:
 276               	/* prologue: function */
 277               	/* frame size = 0 */
 278               	/* stack size = 2 */
 279               	.L__stack_usage = 2
 280 0132 EC01      		movw r28,r24
 412:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	Time t = getTime();
 281               		.loc 1 412 0
 282 0134 0E94 0000 		call getTime
 283               	.LVL21:
 415:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[RECEIVE_TIME_INDEX+3] = (byte) (t & 0xFF);
 284               		.loc 1 415 0
 285 0138 6987      		std Y+9,r22
 416:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[RECEIVE_TIME_INDEX+2] = (byte) ((t >>  8) & 0xFF);
 286               		.loc 1 416 0
 287 013a 7887      		std Y+8,r23
 417:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[RECEIVE_TIME_INDEX+1] = (byte) ((t >> 16) & 0xFF);
 288               		.loc 1 417 0
 289 013c 8F83      		std Y+7,r24
 418:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[RECEIVE_TIME_INDEX] = (byte) ((t >> 24) & 0xFF);
 290               		.loc 1 418 0
 291 013e 9E83      		std Y+6,r25
 292               	/* epilogue start */
 419:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 293               		.loc 1 419 0
 294 0140 DF91      		pop r29
 295 0142 CF91      		pop r28
 296               	.LVL22:
 297 0144 0895      		ret
 298               	.LFE18:
 300               	.global	insertSendTime
 302               	insertSendTime:
 303               	.LFB19:
 422:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 304               		.loc 1 422 0
 305               	.LVL23:
 306 0146 CF93      		push r28
 307               	.LCFI14:
 308 0148 DF93      		push r29
 309               	.LCFI15:
 310               	/* prologue: function */
 311               	/* frame size = 0 */
 312               	/* stack size = 2 */
 313               	.L__stack_usage = 2
 314 014a EC01      		movw r28,r24
 423:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	Time t = getEstimatedGlobalClock(); // Global Clock
 315               		.loc 1 423 0
 316 014c 0E94 0000 		call getEstimatedGlobalClock
 317               	.LVL24:
 426:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[SEND_TIME_INDEX+3] = (byte) (t & 0xFF);
 318               		.loc 1 426 0
 319 0150 6D83      		std Y+5,r22
 427:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[SEND_TIME_INDEX+2] = (byte) ((t >>  8) & 0xFF);
 320               		.loc 1 427 0
 321 0152 7C83      		std Y+4,r23
 428:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[SEND_TIME_INDEX+1] = (byte) ((t >> 16) & 0xFF);
 322               		.loc 1 428 0
 323 0154 8B83      		std Y+3,r24
 429:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	c->data[SEND_TIME_INDEX] = (byte) ((t >> 24) & 0xFF);
 324               		.loc 1 429 0
 325 0156 9A83      		std Y+2,r25
 326               	/* epilogue start */
 430:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 327               		.loc 1 430 0
 328 0158 DF91      		pop r29
 329 015a CF91      		pop r28
 330               	.LVL25:
 331 015c 0895      		ret
 332               	.LFE19:
 334               	.global	isSynchronized
 336               	isSynchronized:
 337               	.LFB23:
 490:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 338               		.loc 1 490 0
 339               	/* prologue: function */
 340               	/* frame size = 0 */
 341               	/* stack size = 0 */
 342               	.L__stack_usage = 0
 491:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return (isTimeLeader() || (firstCalibRec > 0));
 343               		.loc 1 491 0
 344 015e 8091 0000 		lds r24,isLeader
 345 0162 8111      		cpse r24,__zero_reg__
 346 0164 00C0      		rjmp .L21
 491:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return (isTimeLeader() || (firstCalibRec > 0));
 347               		.loc 1 491 0 is_stmt 0 discriminator 2
 348 0166 81E0      		ldi r24,lo8(1)
 349 0168 90E0      		ldi r25,0
 350 016a 4091 0000 		lds r20,firstCalibRec
 351 016e 5091 0000 		lds r21,firstCalibRec+1
 352 0172 6091 0000 		lds r22,firstCalibRec+2
 353 0176 7091 0000 		lds r23,firstCalibRec+3
 354 017a 452B      		or r20,r21
 355 017c 462B      		or r20,r22
 356 017e 472B      		or r20,r23
 357 0180 01F4      		brne .L19
 358 0182 80E0      		ldi r24,0
 359 0184 90E0      		ldi r25,0
 360 0186 0895      		ret
 361               	.L21:
 491:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return (isTimeLeader() || (firstCalibRec > 0));
 362               		.loc 1 491 0
 363 0188 81E0      		ldi r24,lo8(1)
 364 018a 90E0      		ldi r25,0
 365               	.L19:
 493:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 366               		.loc 1 493 0 is_stmt 1 discriminator 4
 367 018c 0895      		ret
 368               	.LFE23:
 370               	.global	initSTChildren
 372               	initSTChildren:
 373               	.LFB24:
 505:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 374               		.loc 1 505 0
 375               	/* prologue: function */
 376               	/* frame size = 0 */
 377               	/* stack size = 0 */
 378               	.L__stack_usage = 0
 379               	.LVL26:
 510:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		syncChildren[p] = 0;
 380               		.loc 1 510 0
 381 018e 1092 0000 		sts syncChildren,__zero_reg__
 382               	.LVL27:
 383 0192 1092 0000 		sts syncChildren+1,__zero_reg__
 384               	.LVL28:
 385 0196 1092 0000 		sts syncChildren+2,__zero_reg__
 386               	.LVL29:
 387 019a 1092 0000 		sts syncChildren+3,__zero_reg__
 388               	.LVL30:
 389 019e 1092 0000 		sts syncChildren+4,__zero_reg__
 390               	.LVL31:
 391 01a2 1092 0000 		sts syncChildren+5,__zero_reg__
 392               	.LVL32:
 393 01a6 0895      		ret
 394               	.LFE24:
 396               	.global	setSlave
 398               	setSlave:
 399               	.LFB26:
 537:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void setSlave(void) {
 400               		.loc 1 537 0
 401               	/* prologue: function */
 402               	/* frame size = 0 */
 403               	/* stack size = 0 */
 404               	.L__stack_usage = 0
 540:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	isLeader = 0;
 405               		.loc 1 540 0
 406 01a8 1092 0000 		sts isLeader,__zero_reg__
 542:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	disableTimer(syncTimer);
 407               		.loc 1 542 0
 408 01ac 1092 0000 		sts syncTimer+16,__zero_reg__
 543:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	deregisterTimer(&syncTimer);
 409               		.loc 1 543 0
 410 01b0 80E0      		ldi r24,lo8(syncTimer)
 411 01b2 90E0      		ldi r25,hi8(syncTimer)
 412 01b4 0E94 0000 		call deregisterTimer
 413               	.LVL33:
 544:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	deregisterTimeout(&(syncTimer.t));
 414               		.loc 1 544 0
 415 01b8 80E0      		ldi r24,lo8(syncTimer+2)
 416 01ba 90E0      		ldi r25,hi8(syncTimer+2)
 417 01bc 0C94 0000 		jmp deregisterTimeout
 418               	.LVL34:
 419               	.LFE26:
 421               	.global	scheduleLeaderElection
 423               	scheduleLeaderElection:
 424               	.LFB30:
 583:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 425               		.loc 1 583 0
 426               	/* prologue: function */
 427               	/* frame size = 0 */
 428               	/* stack size = 0 */
 429               	.L__stack_usage = 0
 584:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if (!electing)
 430               		.loc 1 584 0
 431 01c0 8091 0000 		lds r24,electing
 432 01c4 8111      		cpse r24,__zero_reg__
 433 01c6 00C0      		rjmp .L24
 434               	.LBB6:
 435               	.LBB7:
 586:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		deregisterTimeout(&leaderElectionTimeOut);
 436               		.loc 1 586 0
 437 01c8 80E0      		ldi r24,lo8(leaderElectionTimeOut)
 438 01ca 90E0      		ldi r25,hi8(leaderElectionTimeOut)
 439 01cc 0E94 0000 		call deregisterTimeout
 440               	.LVL35:
 587:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		leaderElectionTimeOut.calltime = getTime() + LEADER_ELECTION_TIMEOUT;
 441               		.loc 1 587 0
 442 01d0 0E94 0000 		call getTime
 443               	.LVL36:
 444 01d4 6C50      		subi r22,12
 445 01d6 7E4F      		sbci r23,-2
 446 01d8 8F4F      		sbci r24,-1
 447 01da 9F4F      		sbci r25,-1
 448 01dc 6093 0000 		sts leaderElectionTimeOut+2,r22
 449 01e0 7093 0000 		sts leaderElectionTimeOut+2+1,r23
 450 01e4 8093 0000 		sts leaderElectionTimeOut+2+2,r24
 451 01e8 9093 0000 		sts leaderElectionTimeOut+2+3,r25
 588:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		leaderElectionTimeOut.callback = (GenericHandler)(&startLeaderElection);
 452               		.loc 1 588 0
 453 01ec 80E0      		ldi r24,lo8(gs(startLeaderElection))
 454 01ee 90E0      		ldi r25,hi8(gs(startLeaderElection))
 455 01f0 8093 0000 		sts leaderElectionTimeOut+6,r24
 456 01f4 9093 0000 		sts leaderElectionTimeOut+6+1,r25
 589:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		registerTimeout(&leaderElectionTimeOut);
 457               		.loc 1 589 0
 458 01f8 80E0      		ldi r24,lo8(leaderElectionTimeOut)
 459 01fa 90E0      		ldi r25,hi8(leaderElectionTimeOut)
 460 01fc 0C94 0000 		jmp registerTimeout
 461               	.LVL37:
 462               	.L24:
 463 0200 0895      		ret
 464               	.LBE7:
 465               	.LBE6:
 466               	.LFE30:
 468               	.global	handleNeighborChange
 470               	handleNeighborChange:
 471               	.LFB16:
 369:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 472               		.loc 1 369 0
 473               	.LVL38:
 474               	/* prologue: function */
 475               	/* frame size = 0 */
 476               	/* stack size = 0 */
 477               	.L__stack_usage = 0
 372:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	electing = 0;
 478               		.loc 1 372 0
 479 0202 1092 0000 		sts electing,__zero_reg__
 375:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		scheduleLeaderElection();
 480               		.loc 1 375 0
 481 0206 0E94 0000 		call scheduleLeaderElection
 482               	.LVL39:
 395:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 483               		.loc 1 395 0
 484 020a 80E0      		ldi r24,0
 485 020c 0895      		ret
 486               	.LFE16:
 488               	.global	initClock
 490               	initClock:
 491               	.LFB8:
 110:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 492               		.loc 1 110 0
 493               	/* prologue: function */
 494               	/* frame size = 0 */
 495               	/* stack size = 0 */
 496               	.L__stack_usage = 0
 111:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	offset = 0;
 497               		.loc 1 111 0
 498 020e 1092 0000 		sts offset,__zero_reg__
 499 0212 1092 0000 		sts offset+1,__zero_reg__
 500 0216 1092 0000 		sts offset+2,__zero_reg__
 501 021a 1092 0000 		sts offset+3,__zero_reg__
 112:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	firstCalibRec = 0;
 502               		.loc 1 112 0
 503 021e 1092 0000 		sts firstCalibRec,__zero_reg__
 504 0222 1092 0000 		sts firstCalibRec+1,__zero_reg__
 505 0226 1092 0000 		sts firstCalibRec+2,__zero_reg__
 506 022a 1092 0000 		sts firstCalibRec+3,__zero_reg__
 113:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	localClockMaxReach = 0;
 507               		.loc 1 113 0
 508 022e 1092 0000 		sts localClockMaxReach,__zero_reg__
 509 0232 1092 0000 		sts localClockMaxReach+1,__zero_reg__
 510 0236 1092 0000 		sts localClockMaxReach+2,__zero_reg__
 511 023a 1092 0000 		sts localClockMaxReach+3,__zero_reg__
 116:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	speedAvg = 1.0;
 512               		.loc 1 116 0
 513 023e 80E0      		ldi r24,0
 514 0240 90E0      		ldi r25,0
 515 0242 A0E8      		ldi r26,lo8(-128)
 516 0244 BFE3      		ldi r27,lo8(63)
 517 0246 8093 0000 		sts speedAvg,r24
 518 024a 9093 0000 		sts speedAvg+1,r25
 519 024e A093 0000 		sts speedAvg+2,r26
 520 0252 B093 0000 		sts speedAvg+3,r27
 117:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	firstCalibSend = 0;
 521               		.loc 1 117 0
 522 0256 1092 0000 		sts firstCalibSend,__zero_reg__
 523 025a 1092 0000 		sts firstCalibSend+1,__zero_reg__
 524 025e 1092 0000 		sts firstCalibSend+2,__zero_reg__
 525 0262 1092 0000 		sts firstCalibSend+3,__zero_reg__
 118:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	nbSync = 0;
 526               		.loc 1 118 0
 527 0266 1092 0000 		sts nbSync,__zero_reg__
 528 026a 1092 0000 		sts nbSync+1,__zero_reg__
 125:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	initSTChildren();
 529               		.loc 1 125 0
 530 026e 0E94 0000 		call initSTChildren
 531               	.LVL40:
 133:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	minIdSender = 255;
 532               		.loc 1 133 0
 533 0272 8FEF      		ldi r24,lo8(-1)
 534 0274 8093 0000 		sts minIdSender,r24
 134:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	minId = getGUID();
 535               		.loc 1 134 0
 536 0278 0E94 0000 		call getGUID
 537               	.LVL41:
 538 027c 8093 0000 		sts minId,r24
 539 0280 9093 0000 		sts minId+1,r25
 135:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	electing = 0;
 540               		.loc 1 135 0
 541 0284 1092 0000 		sts electing,__zero_reg__
 136:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	setSlave();
 542               		.loc 1 136 0
 543 0288 0E94 0000 		call setSlave
 544               	.LVL42:
 137:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	scheduleLeaderElection();
 545               		.loc 1 137 0
 546 028c 0C94 0000 		jmp scheduleLeaderElection
 547               	.LVL43:
 548               	.LFE8:
 550               	.global	sendClockChunk
 552               	sendClockChunk:
 553               	.LFB33:
 636:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 637:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 638:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte sendClockChunk(PRef p, byte *d, byte s)
 639:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 554               		.loc 1 639 0
 555               	.LVL44:
 556 0290 8F92      		push r8
 557               	.LCFI16:
 558 0292 9F92      		push r9
 559               	.LCFI17:
 560 0294 BF92      		push r11
 561               	.LCFI18:
 562 0296 CF92      		push r12
 563               	.LCFI19:
 564 0298 DF92      		push r13
 565               	.LCFI20:
 566 029a EF92      		push r14
 567               	.LCFI21:
 568 029c FF92      		push r15
 569               	.LCFI22:
 570 029e 0F93      		push r16
 571               	.LCFI23:
 572 02a0 1F93      		push r17
 573               	.LCFI24:
 574 02a2 CF93      		push r28
 575               	.LCFI25:
 576 02a4 DF93      		push r29
 577               	.LCFI26:
 578 02a6 1F92      		push __zero_reg__
 579               	.LCFI27:
 580 02a8 CDB7      		in r28,__SP_L__
 581 02aa DEB7      		in r29,__SP_H__
 582               	.LCFI28:
 583               	/* prologue: function */
 584               	/* frame size = 1 */
 585               	/* stack size = 12 */
 586               	.L__stack_usage = 12
 587 02ac B82E      		mov r11,r24
 588 02ae 6B01      		movw r12,r22
 640:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	Chunk *c=calloc(sizeof(Chunk), 1);
 589               		.loc 1 640 0
 590 02b0 61E0      		ldi r22,lo8(1)
 591 02b2 70E0      		ldi r23,0
 592               	.LVL45:
 593 02b4 88E1      		ldi r24,lo8(24)
 594 02b6 90E0      		ldi r25,0
 595               	.LVL46:
 596 02b8 4983      		std Y+1,r20
 597 02ba 0E94 0000 		call calloc
 598               	.LVL47:
 599 02be 4C01      		movw r8,r24
 600               	.LVL48:
 641:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if (c == NULL)
 601               		.loc 1 641 0
 602 02c0 2981      		ldd r18,Y+1
 603 02c2 0097      		sbiw r24,0
 604 02c4 01F0      		breq .L30
 642:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 643:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		return 0;
 644:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 645:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if (sendMessageToPort(c, p, d, s, (MsgHandler)RES_SYS_HANDLER, (GenericHandler)&freeClockChunk) ==
 605               		.loc 1 645 0
 606 02c6 80E0      		ldi r24,lo8(gs(freeClockChunk))
 607 02c8 E82E      		mov r14,r24
 608 02ca 80E0      		ldi r24,hi8(gs(freeClockChunk))
 609 02cc F82E      		mov r15,r24
 610 02ce 00E0      		ldi r16,0
 611 02d0 10E0      		ldi r17,0
 612 02d2 A601      		movw r20,r12
 613 02d4 6B2D      		mov r22,r11
 614 02d6 C401      		movw r24,r8
 615 02d8 0E94 0000 		call sendMessageToPort
 616               	.LVL49:
 617 02dc 8111      		cpse r24,__zero_reg__
 618 02de 00C0      		rjmp .L31
 646:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 647:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		free(c);
 619               		.loc 1 647 0
 620 02e0 C401      		movw r24,r8
 621 02e2 0E94 0000 		call free
 622               	.LVL50:
 623               	.L30:
 643:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		return 0;
 624               		.loc 1 643 0
 625 02e6 80E0      		ldi r24,0
 626 02e8 00C0      		rjmp .L29
 627               	.L31:
 648:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		return 0;
 649:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 650:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return 1;
 628               		.loc 1 650 0
 629 02ea 81E0      		ldi r24,lo8(1)
 630               	.L29:
 631               	/* epilogue start */
 651:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 632               		.loc 1 651 0
 633 02ec 0F90      		pop __tmp_reg__
 634 02ee DF91      		pop r29
 635 02f0 CF91      		pop r28
 636 02f2 1F91      		pop r17
 637 02f4 0F91      		pop r16
 638 02f6 FF90      		pop r15
 639 02f8 EF90      		pop r14
 640 02fa DF90      		pop r13
 641 02fc CF90      		pop r12
 642               	.LVL51:
 643 02fe BF90      		pop r11
 644               	.LVL52:
 645 0300 9F90      		pop r9
 646 0302 8F90      		pop r8
 647               	.LVL53:
 648 0304 0895      		ret
 649               	.LFE33:
 651               	.global	sendGoMsg
 653               	sendGoMsg:
 654               	.LFB28:
 561:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 655               		.loc 1 561 0
 656               	.LVL54:
 657 0306 1F93      		push r17
 658               	.LCFI29:
 659 0308 CF93      		push r28
 660               	.LCFI30:
 661 030a DF93      		push r29
 662               	.LCFI31:
 663 030c 00D0      		rcall .
 664 030e 1F92      		push __zero_reg__
 665               	.LCFI32:
 666 0310 CDB7      		in r28,__SP_L__
 667 0312 DEB7      		in r29,__SP_H__
 668               	.LCFI33:
 669               	/* prologue: function */
 670               	/* frame size = 4 */
 671               	/* stack size = 7 */
 672               	.L__stack_usage = 7
 673 0314 182F      		mov r17,r24
 674 0316 9B01      		movw r18,r22
 564:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[0] = CLOCK_SYNC_MSG;
 675               		.loc 1 564 0
 676 0318 80E6      		ldi r24,lo8(96)
 677               	.LVL55:
 678 031a 8983      		std Y+1,r24
 565:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[1] = MIN_ID_TIME_LEADER_ELECTION_GO_MSG;
 679               		.loc 1 565 0
 680 031c 81E0      		ldi r24,lo8(1)
 681 031e 8A83      		std Y+2,r24
 566:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	GUIDIntoChar(id, &(data[2]));
 682               		.loc 1 566 0
 683 0320 BE01      		movw r22,r28
 684               	.LVL56:
 685 0322 6D5F      		subi r22,-3
 686 0324 7F4F      		sbci r23,-1
 687 0326 C901      		movw r24,r18
 688 0328 0E94 0000 		call GUIDIntoChar
 689               	.LVL57:
 568:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return sendClockChunk(p, data, 4);
 690               		.loc 1 568 0
 691 032c 44E0      		ldi r20,lo8(4)
 692 032e BE01      		movw r22,r28
 693 0330 6F5F      		subi r22,-1
 694 0332 7F4F      		sbci r23,-1
 695 0334 812F      		mov r24,r17
 696 0336 0E94 0000 		call sendClockChunk
 697               	.LVL58:
 698               	/* epilogue start */
 569:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 699               		.loc 1 569 0
 700 033a 2496      		adiw r28,4
 701 033c CDBF      		out __SP_L__,r28
 702 033e DEBF      		out __SP_H__,r29
 703 0340 DF91      		pop r29
 704 0342 CF91      		pop r28
 705 0344 1F91      		pop r17
 706               	.LVL59:
 707 0346 0895      		ret
 708               	.LFE28:
 710               	.global	sendBackMsg
 712               	sendBackMsg:
 713               	.LFB27:
 549:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 714               		.loc 1 549 0
 715               	.LVL60:
 716 0348 0F93      		push r16
 717               	.LCFI34:
 718 034a 1F93      		push r17
 719               	.LCFI35:
 720 034c CF93      		push r28
 721               	.LCFI36:
 722 034e DF93      		push r29
 723               	.LCFI37:
 724 0350 CDB7      		in r28,__SP_L__
 725 0352 DEB7      		in r29,__SP_H__
 726               	.LCFI38:
 727 0354 2597      		sbiw r28,5
 728               	.LCFI39:
 729 0356 CDBF      		out __SP_L__,r28
 730 0358 DEBF      		out __SP_H__,r29
 731               	/* prologue: function */
 732               	/* frame size = 5 */
 733               	/* stack size = 9 */
 734               	.L__stack_usage = 9
 735 035a 182F      		mov r17,r24
 736 035c 062F      		mov r16,r22
 552:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[0] = CLOCK_SYNC_MSG;
 737               		.loc 1 552 0
 738 035e 80E6      		ldi r24,lo8(96)
 739               	.LVL61:
 740 0360 8983      		std Y+1,r24
 553:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[1] = MIN_ID_TIME_LEADER_ELECTION_BACK_MSG;
 741               		.loc 1 553 0
 742 0362 82E0      		ldi r24,lo8(2)
 743 0364 8A83      		std Y+2,r24
 554:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	GUIDIntoChar(minId, &(data[2]));
 744               		.loc 1 554 0
 745 0366 BE01      		movw r22,r28
 746               	.LVL62:
 747 0368 6D5F      		subi r22,-3
 748 036a 7F4F      		sbci r23,-1
 749 036c 8091 0000 		lds r24,minId
 750 0370 9091 0000 		lds r25,minId+1
 751 0374 0E94 0000 		call GUIDIntoChar
 752               	.LVL63:
 555:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[4] = a;
 753               		.loc 1 555 0
 754 0378 0D83      		std Y+5,r16
 557:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return sendClockChunk(p, data, 5);
 755               		.loc 1 557 0
 756 037a 45E0      		ldi r20,lo8(5)
 757 037c BE01      		movw r22,r28
 758 037e 6F5F      		subi r22,-1
 759 0380 7F4F      		sbci r23,-1
 760 0382 812F      		mov r24,r17
 761 0384 0E94 0000 		call sendClockChunk
 762               	.LVL64:
 763               	/* epilogue start */
 558:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 764               		.loc 1 558 0
 765 0388 2596      		adiw r28,5
 766 038a CDBF      		out __SP_L__,r28
 767 038c DEBF      		out __SP_H__,r29
 768 038e DF91      		pop r29
 769 0390 CF91      		pop r28
 770 0392 1F91      		pop r17
 771               	.LVL65:
 772 0394 0F91      		pop r16
 773               	.LVL66:
 774 0396 0895      		ret
 775               	.LFE27:
 777               	.global	synchronizeNeighbor
 779               	synchronizeNeighbor:
 780               	.LFB21:
 444:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 781               		.loc 1 444 0
 782               	.LVL67:
 783 0398 CF93      		push r28
 784               	.LCFI40:
 785 039a DF93      		push r29
 786               	.LCFI41:
 787 039c 00D0      		rcall .
 788 039e 1F92      		push __zero_reg__
 789               	.LCFI42:
 790 03a0 CDB7      		in r28,__SP_L__
 791 03a2 DEB7      		in r29,__SP_H__
 792               	.LCFI43:
 793               	/* prologue: function */
 794               	/* frame size = 4 */
 795               	/* stack size = 6 */
 796               	.L__stack_usage = 6
 447:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[0] = CLOCK_SYNC_MSG;
 797               		.loc 1 447 0
 798 03a4 90E6      		ldi r25,lo8(96)
 799 03a6 9983      		std Y+1,r25
 448:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[1] = CLOCK_INFO;
 800               		.loc 1 448 0
 801 03a8 93E0      		ldi r25,lo8(3)
 802 03aa 9A83      		std Y+2,r25
 454:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return sendClockChunk(p, data, 2);
 803               		.loc 1 454 0
 804 03ac 42E0      		ldi r20,lo8(2)
 805 03ae BE01      		movw r22,r28
 806 03b0 6F5F      		subi r22,-1
 807 03b2 7F4F      		sbci r23,-1
 808 03b4 0E94 0000 		call sendClockChunk
 809               	.LVL68:
 810               	/* epilogue start */
 456:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 811               		.loc 1 456 0
 812 03b8 2496      		adiw r28,4
 813 03ba CDBF      		out __SP_L__,r28
 814 03bc DEBF      		out __SP_H__,r29
 815 03be DF91      		pop r29
 816 03c0 CF91      		pop r28
 817 03c2 0895      		ret
 818               	.LFE21:
 820               	.global	synchronizeNeighbors
 822               	synchronizeNeighbors:
 823               	.LFB22:
 459:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 824               		.loc 1 459 0
 825 03c4 EF92      		push r14
 826               	.LCFI44:
 827 03c6 FF92      		push r15
 828               	.LCFI45:
 829 03c8 0F93      		push r16
 830               	.LCFI46:
 831 03ca 1F93      		push r17
 832               	.LCFI47:
 833 03cc CF93      		push r28
 834               	.LCFI48:
 835 03ce DF93      		push r29
 836               	.LCFI49:
 837               	/* prologue: function */
 838               	/* frame size = 0 */
 839               	/* stack size = 6 */
 840               	.L__stack_usage = 6
 841               	.LVL69:
 842 03d0 00E0      		ldi r16,lo8(syncChildren)
 843 03d2 10E0      		ldi r17,hi8(syncChildren)
 844 03d4 C0E0      		ldi r28,lo8(thisNeighborhood)
 845 03d6 D0E0      		ldi r29,hi8(thisNeighborhood)
 461:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte n = 0;
 846               		.loc 1 461 0
 847 03d8 E12C      		mov r14,__zero_reg__
 476:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	for( p = 0; p < NUM_PORTS; p++)
 848               		.loc 1 476 0
 849 03da F12C      		mov r15,__zero_reg__
 850               	.LVL70:
 851               	.L37:
 478:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		if ((syncChildren[p] == 0) || (thisNeighborhood.n[p] == VACANT))
 852               		.loc 1 478 0
 853 03dc F801      		movw r30,r16
 854 03de 8191      		ld r24,Z+
 855 03e0 8F01      		movw r16,r30
 856 03e2 8823      		tst r24
 857 03e4 01F0      		breq .L36
 478:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		if ((syncChildren[p] == 0) || (thisNeighborhood.n[p] == VACANT))
 858               		.loc 1 478 0 is_stmt 0 discriminator 1
 859 03e6 2881      		ld r18,Y
 860 03e8 3981      		ldd r19,Y+1
 861 03ea 232B      		or r18,r19
 862 03ec 01F0      		breq .L36
 482:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		synchronizeNeighbor(p);
 863               		.loc 1 482 0 is_stmt 1
 864 03ee 8F2D      		mov r24,r15
 865 03f0 0E94 0000 		call synchronizeNeighbor
 866               	.LVL71:
 483:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		n++;
 867               		.loc 1 483 0
 868 03f4 E394      		inc r14
 869               	.LVL72:
 870               	.L36:
 476:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	for( p = 0; p < NUM_PORTS; p++)
 871               		.loc 1 476 0
 872 03f6 F394      		inc r15
 873               	.LVL73:
 874 03f8 2296      		adiw r28,2
 875 03fa F6E0      		ldi r31,lo8(6)
 876 03fc FF12      		cpse r15,r31
 877 03fe 00C0      		rjmp .L37
 487:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 878               		.loc 1 487 0
 879 0400 8E2D      		mov r24,r14
 880               	/* epilogue start */
 881 0402 DF91      		pop r29
 882 0404 CF91      		pop r28
 883 0406 1F91      		pop r17
 884 0408 0F91      		pop r16
 885 040a FF90      		pop r15
 886               	.LVL74:
 887 040c EF90      		pop r14
 888               	.LVL75:
 889 040e 0895      		ret
 890               	.LFE22:
 892               	.global	setLeader
 894               	setLeader:
 895               	.LFB25:
 519:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** void setLeader(void) {
 896               		.loc 1 519 0
 897 0410 CF93      		push r28
 898               	.LCFI50:
 899               	/* prologue: function */
 900               	/* frame size = 0 */
 901               	/* stack size = 1 */
 902               	.L__stack_usage = 1
 523:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	isLeader = 1;
 903               		.loc 1 523 0
 904 0412 C1E0      		ldi r28,lo8(1)
 905 0414 C093 0000 		sts isLeader,r28
 525:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	syncTimer.period = SYNC_PERIOD;
 906               		.loc 1 525 0
 907 0418 88EB      		ldi r24,lo8(-72)
 908 041a 9BE0      		ldi r25,lo8(11)
 909 041c A0E0      		ldi r26,0
 910 041e B0E0      		ldi r27,0
 911 0420 8093 0000 		sts syncTimer+12,r24
 912 0424 9093 0000 		sts syncTimer+12+1,r25
 913 0428 A093 0000 		sts syncTimer+12+2,r26
 914 042c B093 0000 		sts syncTimer+12+3,r27
 530:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	syncTimer.t.callback = (GenericHandler)&synchronizeNeighbors;
 915               		.loc 1 530 0
 916 0430 80E0      		ldi r24,lo8(gs(synchronizeNeighbors))
 917 0432 90E0      		ldi r25,hi8(gs(synchronizeNeighbors))
 918 0434 8093 0000 		sts syncTimer+8,r24
 919 0438 9093 0000 		sts syncTimer+8+1,r25
 531:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	synchronizeNeighbors();
 920               		.loc 1 531 0
 921 043c 0E94 0000 		call synchronizeNeighbors
 922               	.LVL76:
 533:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	registerTimer(&(syncTimer));
 923               		.loc 1 533 0
 924 0440 80E0      		ldi r24,lo8(syncTimer)
 925 0442 90E0      		ldi r25,hi8(syncTimer)
 926 0444 0E94 0000 		call registerTimer
 927               	.LVL77:
 534:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	enableTimer(syncTimer);
 928               		.loc 1 534 0
 929 0448 C093 0000 		sts syncTimer+16,r28
 930               	/* epilogue start */
 535:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 931               		.loc 1 535 0
 932 044c CF91      		pop r28
 933 044e 0895      		ret
 934               	.LFE25:
 936               	.global	requestSync
 938               	requestSync:
 939               	.LFB20:
 433:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 940               		.loc 1 433 0
 941               	.LVL78:
 942 0450 CF93      		push r28
 943               	.LCFI51:
 944 0452 DF93      		push r29
 945               	.LCFI52:
 946 0454 1F92      		push __zero_reg__
 947 0456 1F92      		push __zero_reg__
 948               	.LCFI53:
 949 0458 CDB7      		in r28,__SP_L__
 950 045a DEB7      		in r29,__SP_H__
 951               	.LCFI54:
 952               	/* prologue: function */
 953               	/* frame size = 2 */
 954               	/* stack size = 4 */
 955               	.L__stack_usage = 4
 436:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[0] = CLOCK_SYNC_MSG;
 956               		.loc 1 436 0
 957 045c 90E6      		ldi r25,lo8(96)
 958 045e 9983      		std Y+1,r25
 437:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[1] = REQUEST_CLOCK_SYNC;
 959               		.loc 1 437 0
 960 0460 94E0      		ldi r25,lo8(4)
 961 0462 9A83      		std Y+2,r25
 440:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return sendClockChunk(p, data, 2);
 962               		.loc 1 440 0
 963 0464 42E0      		ldi r20,lo8(2)
 964 0466 BE01      		movw r22,r28
 965 0468 6F5F      		subi r22,-1
 966 046a 7F4F      		sbci r23,-1
 967 046c 0E94 0000 		call sendClockChunk
 968               	.LVL79:
 969               	/* epilogue start */
 441:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 970               		.loc 1 441 0
 971 0470 0F90      		pop __tmp_reg__
 972 0472 0F90      		pop __tmp_reg__
 973 0474 DF91      		pop r29
 974 0476 CF91      		pop r28
 975 0478 0895      		ret
 976               	.LFE20:
 978               	.global	broadcastClockChunk
 980               	broadcastClockChunk:
 981               	.LFB34:
 652:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 
 653:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** byte broadcastClockChunk(PRef excludedPort, byte *d, byte s)
 654:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 982               		.loc 1 654 0
 983               	.LVL80:
 984 047a CF92      		push r12
 985               	.LCFI55:
 986 047c DF92      		push r13
 987               	.LCFI56:
 988 047e EF92      		push r14
 989               	.LCFI57:
 990 0480 FF92      		push r15
 991               	.LCFI58:
 992 0482 0F93      		push r16
 993               	.LCFI59:
 994 0484 1F93      		push r17
 995               	.LCFI60:
 996 0486 CF93      		push r28
 997               	.LCFI61:
 998 0488 DF93      		push r29
 999               	.LCFI62:
 1000               	/* prologue: function */
 1001               	/* frame size = 0 */
 1002               	/* stack size = 8 */
 1003               	.L__stack_usage = 8
 1004 048a D82E      		mov r13,r24
 1005 048c 8B01      		movw r16,r22
 1006 048e C42E      		mov r12,r20
 1007               	.LVL81:
 1008 0490 C0E0      		ldi r28,lo8(thisNeighborhood)
 1009 0492 D0E0      		ldi r29,hi8(thisNeighborhood)
 655:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte p;
 656:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	byte sent = 0;
 1010               		.loc 1 656 0
 1011 0494 E12C      		mov r14,__zero_reg__
 657:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	
 658:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	for( p = 0; p < NUM_PORTS; p++)
 1012               		.loc 1 658 0
 1013 0496 F12C      		mov r15,__zero_reg__
 1014               	.LVL82:
 1015               	.L49:
 659:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	{
 660:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		if ((p == excludedPort) || (thisNeighborhood.n[p] == VACANT))
 1016               		.loc 1 660 0
 1017 0498 FD14      		cp r15,r13
 1018 049a 01F0      		breq .L48
 1019               		.loc 1 660 0 is_stmt 0 discriminator 1
 1020 049c 2881      		ld r18,Y
 1021 049e 3981      		ldd r19,Y+1
 1022 04a0 232B      		or r18,r19
 1023 04a2 01F0      		breq .L48
 661:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		{
 662:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			continue;
 663:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		}
 664:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		if(sendClockChunk(p, d, s)) {
 1024               		.loc 1 664 0 is_stmt 1
 1025 04a4 4C2D      		mov r20,r12
 1026 04a6 B801      		movw r22,r16
 1027 04a8 8F2D      		mov r24,r15
 1028 04aa 0E94 0000 		call sendClockChunk
 1029               	.LVL83:
 1030 04ae 8111      		cpse r24,__zero_reg__
 665:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			sent++;
 1031               		.loc 1 665 0
 1032 04b0 E394      		inc r14
 1033               	.LVL84:
 1034               	.L48:
 658:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	for( p = 0; p < NUM_PORTS; p++)
 1035               		.loc 1 658 0
 1036 04b2 F394      		inc r15
 1037               	.LVL85:
 1038 04b4 2296      		adiw r28,2
 1039 04b6 86E0      		ldi r24,lo8(6)
 1040 04b8 F812      		cpse r15,r24
 1041 04ba 00C0      		rjmp .L49
 666:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		}
 667:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	}
 668:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return sent;
 669:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 1042               		.loc 1 669 0
 1043 04bc 8E2D      		mov r24,r14
 1044               	/* epilogue start */
 1045 04be DF91      		pop r29
 1046 04c0 CF91      		pop r28
 1047 04c2 1F91      		pop r17
 1048 04c4 0F91      		pop r16
 1049               	.LVL86:
 1050 04c6 FF90      		pop r15
 1051               	.LVL87:
 1052 04c8 EF90      		pop r14
 1053               	.LVL88:
 1054 04ca DF90      		pop r13
 1055               	.LVL89:
 1056 04cc CF90      		pop r12
 1057               	.LVL90:
 1058 04ce 0895      		ret
 1059               	.LFE34:
 1061               	.global	broadcastGoMsg
 1063               	broadcastGoMsg:
 1064               	.LFB29:
 572:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 1065               		.loc 1 572 0
 1066               	.LVL91:
 1067 04d0 1F93      		push r17
 1068               	.LCFI63:
 1069 04d2 CF93      		push r28
 1070               	.LCFI64:
 1071 04d4 DF93      		push r29
 1072               	.LCFI65:
 1073 04d6 00D0      		rcall .
 1074 04d8 1F92      		push __zero_reg__
 1075               	.LCFI66:
 1076 04da CDB7      		in r28,__SP_L__
 1077 04dc DEB7      		in r29,__SP_H__
 1078               	.LCFI67:
 1079               	/* prologue: function */
 1080               	/* frame size = 4 */
 1081               	/* stack size = 7 */
 1082               	.L__stack_usage = 7
 1083 04de 182F      		mov r17,r24
 1084 04e0 9B01      		movw r18,r22
 575:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[0] = CLOCK_SYNC_MSG;
 1085               		.loc 1 575 0
 1086 04e2 80E6      		ldi r24,lo8(96)
 1087               	.LVL92:
 1088 04e4 8983      		std Y+1,r24
 576:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	data[1] = MIN_ID_TIME_LEADER_ELECTION_GO_MSG;
 1089               		.loc 1 576 0
 1090 04e6 81E0      		ldi r24,lo8(1)
 1091 04e8 8A83      		std Y+2,r24
 577:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	GUIDIntoChar(id, &(data[2]));
 1092               		.loc 1 577 0
 1093 04ea BE01      		movw r22,r28
 1094               	.LVL93:
 1095 04ec 6D5F      		subi r22,-3
 1096 04ee 7F4F      		sbci r23,-1
 1097 04f0 C901      		movw r24,r18
 1098 04f2 0E94 0000 		call GUIDIntoChar
 1099               	.LVL94:
 579:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return broadcastClockChunk(p, data, 4);
 1100               		.loc 1 579 0
 1101 04f6 44E0      		ldi r20,lo8(4)
 1102 04f8 BE01      		movw r22,r28
 1103 04fa 6F5F      		subi r22,-1
 1104 04fc 7F4F      		sbci r23,-1
 1105 04fe 812F      		mov r24,r17
 1106 0500 0E94 0000 		call broadcastClockChunk
 1107               	.LVL95:
 1108               	/* epilogue start */
 580:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 1109               		.loc 1 580 0
 1110 0504 2496      		adiw r28,4
 1111 0506 CDBF      		out __SP_L__,r28
 1112 0508 DEBF      		out __SP_H__,r29
 1113 050a DF91      		pop r29
 1114 050c CF91      		pop r28
 1115 050e 1F91      		pop r17
 1116               	.LVL96:
 1117 0510 0895      		ret
 1118               	.LFE29:
 1120               	.global	startLeaderElection
 1122               	startLeaderElection:
 1123               	.LFB31:
 598:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 1124               		.loc 1 598 0
 1125 0512 CF93      		push r28
 1126               	.LCFI68:
 1127 0514 DF93      		push r29
 1128               	.LCFI69:
 1129               	/* prologue: function */
 1130               	/* frame size = 0 */
 1131               	/* stack size = 2 */
 1132               	.L__stack_usage = 2
 603:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if (!electing) {
 1133               		.loc 1 603 0
 1134 0516 8091 0000 		lds r24,electing
 1135 051a 8111      		cpse r24,__zero_reg__
 1136 051c 00C0      		rjmp .L58
 605:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		setSlave();
 1137               		.loc 1 605 0
 1138 051e 0E94 0000 		call setSlave
 1139               	.LVL97:
 606:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		minId = getGUID();
 1140               		.loc 1 606 0
 1141 0522 0E94 0000 		call getGUID
 1142               	.LVL98:
 1143 0526 8093 0000 		sts minId,r24
 1144 052a 9093 0000 		sts minId+1,r25
 607:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		minIdSender = 255;
 1145               		.loc 1 607 0
 1146 052e 8FEF      		ldi r24,lo8(-1)
 1147 0530 8093 0000 		sts minIdSender,r24
 608:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		electing = 1;
 1148               		.loc 1 608 0
 1149 0534 81E0      		ldi r24,lo8(1)
 1150 0536 8093 0000 		sts electing,r24
 609:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		initSTChildren();
 1151               		.loc 1 609 0
 1152 053a 0E94 0000 		call initSTChildren
 1153               	.LVL99:
 610:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		nbNeededAnswers = broadcastGoMsg(255, getGUID());
 1154               		.loc 1 610 0
 1155 053e 0E94 0000 		call getGUID
 1156               	.LVL100:
 1157 0542 BC01      		movw r22,r24
 1158 0544 8FEF      		ldi r24,lo8(-1)
 1159 0546 0E94 0000 		call broadcastGoMsg
 1160               	.LVL101:
 1161 054a 8093 0000 		sts nbNeededAnswers,r24
 611:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		if (nbNeededAnswers == 0) 
 1162               		.loc 1 611 0
 1163 054e 8111      		cpse r24,__zero_reg__
 1164 0550 00C0      		rjmp .L58
 613:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			electing = 0;
 1165               		.loc 1 613 0
 1166 0552 1092 0000 		sts electing,__zero_reg__
 614:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if (minId == getGUID())
 1167               		.loc 1 614 0
 1168 0556 C091 0000 		lds r28,minId
 1169 055a D091 0000 		lds r29,minId+1
 1170 055e 0E94 0000 		call getGUID
 1171               	.LVL102:
 1172 0562 C817      		cp r28,r24
 1173 0564 D907      		cpc r29,r25
 1174 0566 01F4      		brne .L62
 1175               	/* epilogue start */
 625:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 1176               		.loc 1 625 0
 1177 0568 DF91      		pop r29
 1178 056a CF91      		pop r28
 617:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				setLeader();
 1179               		.loc 1 617 0
 1180 056c 0C94 0000 		jmp setLeader
 1181               	.LVL103:
 1182               	.L62:
 1183               	.LBB10:
 1184               	.LBB11:
 621:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				sendBackMsg(minIdSender, 1);
 1185               		.loc 1 621 0
 1186 0570 61E0      		ldi r22,lo8(1)
 1187 0572 8091 0000 		lds r24,minIdSender
 1188               	/* epilogue start */
 1189               	.LBE11:
 1190               	.LBE10:
 625:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 1191               		.loc 1 625 0
 1192 0576 DF91      		pop r29
 1193 0578 CF91      		pop r28
 1194               	.LBB13:
 1195               	.LBB12:
 621:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				sendBackMsg(minIdSender, 1);
 1196               		.loc 1 621 0
 1197 057a 0C94 0000 		jmp sendBackMsg
 1198               	.LVL104:
 1199               	.L58:
 1200               	/* epilogue start */
 1201               	.LBE12:
 1202               	.LBE13:
 625:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 1203               		.loc 1 625 0
 1204 057e DF91      		pop r29
 1205 0580 CF91      		pop r28
 1206 0582 0895      		ret
 1207               	.LFE31:
 1209               	.global	__divsf3
 1210               	.global	__subsf3
 1211               	.global	__fixsfsi
 1212               	.global	handleClockSyncMessage
 1214               	handleClockSyncMessage:
 1215               	.LFB15:
 205:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** {
 1216               		.loc 1 205 0
 1217 0584 2F92      		push r2
 1218               	.LCFI70:
 1219 0586 3F92      		push r3
 1220               	.LCFI71:
 1221 0588 4F92      		push r4
 1222               	.LCFI72:
 1223 058a 5F92      		push r5
 1224               	.LCFI73:
 1225 058c 6F92      		push r6
 1226               	.LCFI74:
 1227 058e 7F92      		push r7
 1228               	.LCFI75:
 1229 0590 8F92      		push r8
 1230               	.LCFI76:
 1231 0592 9F92      		push r9
 1232               	.LCFI77:
 1233 0594 AF92      		push r10
 1234               	.LCFI78:
 1235 0596 BF92      		push r11
 1236               	.LCFI79:
 1237 0598 CF92      		push r12
 1238               	.LCFI80:
 1239 059a DF92      		push r13
 1240               	.LCFI81:
 1241 059c EF92      		push r14
 1242               	.LCFI82:
 1243 059e FF92      		push r15
 1244               	.LCFI83:
 1245 05a0 0F93      		push r16
 1246               	.LCFI84:
 1247 05a2 1F93      		push r17
 1248               	.LCFI85:
 1249 05a4 CF93      		push r28
 1250               	.LCFI86:
 1251 05a6 DF93      		push r29
 1252               	.LCFI87:
 1253 05a8 CDB7      		in r28,__SP_L__
 1254 05aa DEB7      		in r29,__SP_H__
 1255               	.LCFI88:
 1256 05ac 2897      		sbiw r28,8
 1257               	.LCFI89:
 1258 05ae CDBF      		out __SP_L__,r28
 1259 05b0 DEBF      		out __SP_H__,r29
 1260               	/* prologue: function */
 1261               	/* frame size = 8 */
 1262               	/* stack size = 26 */
 1263               	.L__stack_usage = 26
 206:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	if (thisChunk == NULL) 
 1264               		.loc 1 206 0
 1265 05b2 0091 0000 		lds r16,thisChunk
 1266 05b6 1091 0000 		lds r17,thisChunk+1
 1267 05ba 0115      		cp r16,__zero_reg__
 1268 05bc 1105      		cpc r17,__zero_reg__
 1269 05be 01F4      		brne .+2
 1270 05c0 00C0      		rjmp .L79
 211:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	switch(thisChunk->data[1])
 1271               		.loc 1 211 0
 1272 05c2 F801      		movw r30,r16
 1273 05c4 8181      		ldd r24,Z+1
 1274 05c6 8230      		cpi r24,lo8(2)
 1275 05c8 01F4      		brne .+2
 1276 05ca 00C0      		rjmp .L66
 1277 05cc 00F4      		brsh .L69
 1278 05ce 8130      		cpi r24,lo8(1)
 1279 05d0 01F0      		breq .+2
 1280 05d2 00C0      		rjmp .L80
 1281 05d4 00C0      		rjmp .L65
 1282               	.L69:
 1283 05d6 8330      		cpi r24,lo8(3)
 1284 05d8 01F0      		breq .L67
 1285 05da 8430      		cpi r24,lo8(4)
 1286 05dc 01F0      		breq .+2
 1287 05de 00C0      		rjmp .L80
 1288 05e0 00C0      		rjmp .L68
 1289               	.L67:
 1290               	.LBB14:
 233:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			sendTime  = (Time)(thisChunk->data[SEND_TIME_INDEX+3]) & 0xFF;
 1291               		.loc 1 233 0
 1292 05e2 F801      		movw r30,r16
 1293 05e4 C580      		ldd r12,Z+5
 236:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			sendTime |= ((Time)(thisChunk->data[SEND_TIME_INDEX]) << 24)  & 0xFF000000;
 1294               		.loc 1 236 0
 1295 05e6 8281      		ldd r24,Z+2
 1296 05e8 D12C      		mov r13,__zero_reg__
 1297 05ea E12C      		mov r14,__zero_reg__
 1298 05ec F12C      		mov r15,__zero_reg__
 234:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			sendTime |= ((Time)(thisChunk->data[SEND_TIME_INDEX+2]) << 8) & 0xFF00;
 1299               		.loc 1 234 0
 1300 05ee F82A      		or r15,r24
 1301 05f0 8481      		ldd r24,Z+4
 235:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			sendTime |= ((Time)(thisChunk->data[SEND_TIME_INDEX+1]) << 16) & 0xFF0000;
 1302               		.loc 1 235 0
 1303 05f2 D82A      		or r13,r24
 1304 05f4 8381      		ldd r24,Z+3
 236:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			sendTime |= ((Time)(thisChunk->data[SEND_TIME_INDEX]) << 24)  & 0xFF000000;
 1305               		.loc 1 236 0
 1306 05f6 E82A      		or r14,r24
 1307               	.LVL105:
 238:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			receiveTime  = (Time)(thisChunk->data[RECEIVE_TIME_INDEX+3]) & 0xFF;
 1308               		.loc 1 238 0
 1309 05f8 8184      		ldd r8,Z+9
 241:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			receiveTime |= ((Time)(thisChunk->data[RECEIVE_TIME_INDEX]) << 24)  & 0xFF000000;
 1310               		.loc 1 241 0
 1311 05fa 8681      		ldd r24,Z+6
 1312 05fc 912C      		mov r9,__zero_reg__
 1313 05fe A12C      		mov r10,__zero_reg__
 1314 0600 B12C      		mov r11,__zero_reg__
 239:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			receiveTime |= ((Time)(thisChunk->data[RECEIVE_TIME_INDEX+2]) << 8) & 0xFF00;
 1315               		.loc 1 239 0
 1316 0602 B82A      		or r11,r24
 1317 0604 8085      		ldd r24,Z+8
 240:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			receiveTime |= ((Time)(thisChunk->data[RECEIVE_TIME_INDEX+1]) << 16) & 0xFF0000;
 1318               		.loc 1 240 0
 1319 0606 982A      		or r9,r24
 1320 0608 8781      		ldd r24,Z+7
 241:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			receiveTime |= ((Time)(thisChunk->data[RECEIVE_TIME_INDEX]) << 24)  & 0xFF000000;
 1321               		.loc 1 241 0
 1322 060a A82A      		or r10,r24
 1323               	.LVL106:
 243:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			localClockMaxReach = fmax(getClock(), localClockMaxReach);
 1324               		.loc 1 243 0
 1325 060c 6091 0000 		lds r22,localClockMaxReach
 1326 0610 7091 0000 		lds r23,localClockMaxReach+1
 1327 0614 8091 0000 		lds r24,localClockMaxReach+2
 1328 0618 9091 0000 		lds r25,localClockMaxReach+3
 1329 061c 0E94 0000 		call __floatunsisf
 1330               	.LVL107:
 1331 0620 9B01      		movw r18,r22
 1332 0622 AC01      		movw r20,r24
 1333 0624 6D83      		std Y+5,r22
 1334 0626 3E83      		std Y+6,r19
 1335 0628 4F83      		std Y+7,r20
 1336 062a 5887      		std Y+8,r21
 1337 062c 0E94 0000 		call getClock
 1338               	.LVL108:
 1339 0630 0E94 0000 		call __floatunsisf
 1340               	.LVL109:
 1341 0634 2D81      		ldd r18,Y+5
 1342 0636 3E81      		ldd r19,Y+6
 1343 0638 4F81      		ldd r20,Y+7
 1344 063a 5885      		ldd r21,Y+8
 1345 063c 0E94 0000 		call fmax
 1346               	.LVL110:
 1347 0640 0E94 0000 		call __fixunssfsi
 1348               	.LVL111:
 1349 0644 6093 0000 		sts localClockMaxReach,r22
 1350 0648 7093 0000 		sts localClockMaxReach+1,r23
 1351 064c 8093 0000 		sts localClockMaxReach+2,r24
 1352 0650 9093 0000 		sts localClockMaxReach+3,r25
 244:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			estimatedGlobalTime = sendTime + ESTIMATED_TRANSMISSION_DELAY;
 1353               		.loc 1 244 0
 1354 0654 F6E0      		ldi r31,6
 1355 0656 CF0E      		add r12,r31
 1356 0658 D11C      		adc r13,__zero_reg__
 1357 065a E11C      		adc r14,__zero_reg__
 1358 065c F11C      		adc r15,__zero_reg__
 1359               	.LVL112:
 257:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			nbSync++;
 1360               		.loc 1 257 0
 1361 065e 8091 0000 		lds r24,nbSync
 1362 0662 9091 0000 		lds r25,nbSync+1
 1363 0666 0196      		adiw r24,1
 1364 0668 8093 0000 		sts nbSync,r24
 1365 066c 9093 0000 		sts nbSync+1,r25
 258:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if ((nbSync == 1) || ( (getTime() - firstCalibRec) < (SYNC_PERIOD/2))) {
 1366               		.loc 1 258 0
 1367 0670 0197      		sbiw r24,1
 1368 0672 01F4      		brne .L70
 1369               	.L72:
 259:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				offset = estimatedGlobalTime - receiveTime;
 1370               		.loc 1 259 0
 1371 0674 D701      		movw r26,r14
 1372 0676 C601      		movw r24,r12
 1373 0678 8819      		sub r24,r8
 1374 067a 9909      		sbc r25,r9
 1375 067c AA09      		sbc r26,r10
 1376 067e BB09      		sbc r27,r11
 1377 0680 8093 0000 		sts offset,r24
 1378 0684 9093 0000 		sts offset+1,r25
 1379 0688 A093 0000 		sts offset+2,r26
 1380 068c B093 0000 		sts offset+3,r27
 1381 0690 00C0      		rjmp .L81
 1382               	.L70:
 258:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if ((nbSync == 1) || ( (getTime() - firstCalibRec) < (SYNC_PERIOD/2))) {
 1383               		.loc 1 258 0 discriminator 1
 1384 0692 0E94 0000 		call getTime
 1385               	.LVL113:
 1386 0696 4090 0000 		lds r4,firstCalibRec
 1387 069a 5090 0000 		lds r5,firstCalibRec+1
 1388 069e 6090 0000 		lds r6,firstCalibRec+2
 1389 06a2 7090 0000 		lds r7,firstCalibRec+3
 1390 06a6 6419      		sub r22,r4
 1391 06a8 7509      		sbc r23,r5
 1392 06aa 8609      		sbc r24,r6
 1393 06ac 9709      		sbc r25,r7
 1394 06ae 6C3D      		cpi r22,-36
 1395 06b0 7540      		sbci r23,5
 1396 06b2 8105      		cpc r24,__zero_reg__
 1397 06b4 9105      		cpc r25,__zero_reg__
 1398 06b6 00F0      		brlo .L72
 265:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				speedAvg = ((double) (estimatedGlobalTime - firstCalibSend))/ ((double) (receiveTime - firstCal
 1399               		.loc 1 265 0
 1400 06b8 8091 0000 		lds r24,firstCalibSend
 1401 06bc 9091 0000 		lds r25,firstCalibSend+1
 1402 06c0 A091 0000 		lds r26,firstCalibSend+2
 1403 06c4 B091 0000 		lds r27,firstCalibSend+3
 1404 06c8 A701      		movw r20,r14
 1405 06ca 9601      		movw r18,r12
 1406 06cc 281B      		sub r18,r24
 1407 06ce 390B      		sbc r19,r25
 1408 06d0 4A0B      		sbc r20,r26
 1409 06d2 5B0B      		sbc r21,r27
 1410 06d4 CA01      		movw r24,r20
 1411 06d6 B901      		movw r22,r18
 1412 06d8 0E94 0000 		call __floatunsisf
 1413               	.LVL114:
 1414 06dc 6983      		std Y+1,r22
 1415 06de 7A83      		std Y+2,r23
 1416 06e0 8B83      		std Y+3,r24
 1417 06e2 9C83      		std Y+4,r25
 1418 06e4 C501      		movw r24,r10
 1419 06e6 B401      		movw r22,r8
 1420 06e8 6419      		sub r22,r4
 1421 06ea 7509      		sbc r23,r5
 1422 06ec 8609      		sbc r24,r6
 1423 06ee 9709      		sbc r25,r7
 1424 06f0 0E94 0000 		call __floatunsisf
 1425               	.LVL115:
 1426 06f4 9B01      		movw r18,r22
 1427 06f6 AC01      		movw r20,r24
 1428 06f8 6981      		ldd r22,Y+1
 1429 06fa 7A81      		ldd r23,Y+2
 1430 06fc 8B81      		ldd r24,Y+3
 1431 06fe 9C81      		ldd r25,Y+4
 1432 0700 0E94 0000 		call __divsf3
 1433               	.LVL116:
 1434 0704 1B01      		movw r2,r22
 1435 0706 182F      		mov r17,r24
 1436 0708 092F      		mov r16,r25
 1437 070a 9801      		movw r18,r16
 1438 070c 862F      		mov r24,r22
 1439 070e 932D      		mov r25,r3
 1440 0710 A32F      		mov r26,r19
 1441 0712 B22F      		mov r27,r18
 1442 0714 8093 0000 		sts speedAvg,r24
 1443 0718 9093 0000 		sts speedAvg+1,r25
 1444 071c A093 0000 		sts speedAvg+2,r26
 1445 0720 B093 0000 		sts speedAvg+3,r27
 266:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				offset = round(estimatedGlobalTime - (speedAvg*((double)getTime())));
 1446               		.loc 1 266 0
 1447 0724 0E94 0000 		call getTime
 1448               	.LVL117:
 1449 0728 6983      		std Y+1,r22
 1450 072a 7A83      		std Y+2,r23
 1451 072c 8B83      		std Y+3,r24
 1452 072e 9C83      		std Y+4,r25
 1453 0730 C701      		movw r24,r14
 1454 0732 B601      		movw r22,r12
 1455 0734 0E94 0000 		call __floatunsisf
 1456               	.LVL118:
 1457 0738 2B01      		movw r4,r22
 1458 073a 3C01      		movw r6,r24
 1459 073c 6981      		ldd r22,Y+1
 1460 073e 7A81      		ldd r23,Y+2
 1461 0740 8B81      		ldd r24,Y+3
 1462 0742 9C81      		ldd r25,Y+4
 1463 0744 0E94 0000 		call __floatunsisf
 1464               	.LVL119:
 1465 0748 9B01      		movw r18,r22
 1466 074a AC01      		movw r20,r24
 1467 074c F801      		movw r30,r16
 1468 074e 622D      		mov r22,r2
 1469 0750 732D      		mov r23,r3
 1470 0752 8F2F      		mov r24,r31
 1471 0754 9E2F      		mov r25,r30
 1472 0756 0E94 0000 		call __mulsf3
 1473               	.LVL120:
 1474 075a 9B01      		movw r18,r22
 1475 075c AC01      		movw r20,r24
 1476 075e C301      		movw r24,r6
 1477 0760 B201      		movw r22,r4
 1478 0762 0E94 0000 		call __subsf3
 1479               	.LVL121:
 1480 0766 0E94 0000 		call round
 1481               	.LVL122:
 1482 076a 0E94 0000 		call __fixsfsi
 1483               	.LVL123:
 1484 076e 6093 0000 		sts offset,r22
 1485 0772 7093 0000 		sts offset+1,r23
 1486 0776 8093 0000 		sts offset+2,r24
 1487 077a 9093 0000 		sts offset+3,r25
 268:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				if ((nbSync % RESET_SLOPE_AFTER) == 0 ) 
 1488               		.loc 1 268 0
 1489 077e 8091 0000 		lds r24,nbSync
 1490 0782 9091 0000 		lds r25,nbSync+1
 1491 0786 65E0      		ldi r22,lo8(5)
 1492 0788 70E0      		ldi r23,0
 1493 078a 0E94 0000 		call __udivmodhi4
 1494 078e 892B      		or r24,r25
 1495 0790 01F4      		brne .L71
 1496               	.L81:
 270:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					firstCalibSend = estimatedGlobalTime;
 1497               		.loc 1 270 0
 1498 0792 C092 0000 		sts firstCalibSend,r12
 1499 0796 D092 0000 		sts firstCalibSend+1,r13
 1500 079a E092 0000 		sts firstCalibSend+2,r14
 1501 079e F092 0000 		sts firstCalibSend+3,r15
 271:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					firstCalibRec = receiveTime;
 1502               		.loc 1 271 0
 1503 07a2 8092 0000 		sts firstCalibRec,r8
 1504 07a6 9092 0000 		sts firstCalibRec+1,r9
 1505 07aa A092 0000 		sts firstCalibRec+2,r10
 1506 07ae B092 0000 		sts firstCalibRec+3,r11
 1507               	.L71:
 290:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			synchronizeNeighbors();
 1508               		.loc 1 290 0
 1509 07b2 0E94 0000 		call synchronizeNeighbors
 1510               	.LVL124:
 1511 07b6 00C0      		rjmp .L80
 1512               	.LVL125:
 1513               	.L68:
 1514               	.LBE14:
 296:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if(isSynchronized())
 1515               		.loc 1 296 0
 1516 07b8 0E94 0000 		call isSynchronized
 1517               	.LVL126:
 1518 07bc 8111      		cpse r24,__zero_reg__
 1519 07be 00C0      		rjmp .L73
 1520 07c0 00C0      		rjmp .L80
 1521               	.L73:
 298:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				synchronizeNeighbor(faceNum(thisChunk));
 1522               		.loc 1 298 0
 1523 07c2 F801      		movw r30,r16
 1524 07c4 8189      		ldd r24,Z+17
 1525 07c6 8770      		andi r24,lo8(7)
 1526 07c8 0E94 0000 		call synchronizeNeighbor
 1527               	.LVL127:
 1528 07cc 00C0      		rjmp .L80
 1529               	.L65:
 1530               	.LBB15:
 305:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			uint16_t id = charToGUID(&(thisChunk->data[2]));
 1531               		.loc 1 305 0
 1532 07ce C801      		movw r24,r16
 1533 07d0 0296      		adiw r24,2
 1534 07d2 0E94 0000 		call charToGUID
 1535               	.LVL128:
 1536 07d6 8C01      		movw r16,r24
 1537               	.LVL129:
 307:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if (!electing)
 1538               		.loc 1 307 0
 1539 07d8 8091 0000 		lds r24,electing
 1540 07dc 8111      		cpse r24,__zero_reg__
 1541 07de 00C0      		rjmp .L74
 310:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				deregisterTimeout(&leaderElectionTimeOut);
 1542               		.loc 1 310 0
 1543 07e0 80E0      		ldi r24,lo8(leaderElectionTimeOut)
 1544 07e2 90E0      		ldi r25,hi8(leaderElectionTimeOut)
 1545 07e4 0E94 0000 		call deregisterTimeout
 1546               	.LVL130:
 311:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				startLeaderElection();
 1547               		.loc 1 311 0
 1548 07e8 0E94 0000 		call startLeaderElection
 1549               	.LVL131:
 1550               	.L74:
 314:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if (id == minId)
 1551               		.loc 1 314 0
 1552 07ec 8091 0000 		lds r24,minId
 1553 07f0 9091 0000 		lds r25,minId+1
 1554 07f4 0817      		cp r16,r24
 1555 07f6 1907      		cpc r17,r25
 1556 07f8 01F4      		brne .L75
 316:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				sendBackMsg(faceNum(thisChunk), 0);
 1557               		.loc 1 316 0
 1558 07fa E091 0000 		lds r30,thisChunk
 1559 07fe F091 0000 		lds r31,thisChunk+1
 1560 0802 8189      		ldd r24,Z+17
 1561 0804 60E0      		ldi r22,0
 1562 0806 8770      		andi r24,lo8(7)
 1563 0808 0E94 0000 		call sendBackMsg
 1564               	.LVL132:
 1565               	.L75:
 318:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if (id < minId)
 1566               		.loc 1 318 0
 1567 080c 8091 0000 		lds r24,minId
 1568 0810 9091 0000 		lds r25,minId+1
 1569 0814 0817      		cp r16,r24
 1570 0816 1907      		cpc r17,r25
 1571 0818 00F0      		brlo .+2
 1572 081a 00C0      		rjmp .L80
 320:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				minId = id;
 1573               		.loc 1 320 0
 1574 081c 0093 0000 		sts minId,r16
 1575 0820 1093 0000 		sts minId+1,r17
 321:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				minIdSender = faceNum(thisChunk);
 1576               		.loc 1 321 0
 1577 0824 E091 0000 		lds r30,thisChunk
 1578 0828 F091 0000 		lds r31,thisChunk+1
 1579 082c 8189      		ldd r24,Z+17
 1580 082e 8770      		andi r24,lo8(7)
 1581 0830 8093 0000 		sts minIdSender,r24
 322:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				initSTChildren();
 1582               		.loc 1 322 0
 1583 0834 0E94 0000 		call initSTChildren
 1584               	.LVL133:
 323:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				nbNeededAnswers = broadcastGoMsg(faceNum(thisChunk), id);
 1585               		.loc 1 323 0
 1586 0838 E091 0000 		lds r30,thisChunk
 1587 083c F091 0000 		lds r31,thisChunk+1
 1588 0840 8189      		ldd r24,Z+17
 1589 0842 B801      		movw r22,r16
 1590 0844 8770      		andi r24,lo8(7)
 1591 0846 0E94 0000 		call broadcastGoMsg
 1592               	.LVL134:
 1593 084a 8093 0000 		sts nbNeededAnswers,r24
 325:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				if (nbNeededAnswers == 0) 
 1594               		.loc 1 325 0
 1595 084e 8111      		cpse r24,__zero_reg__
 1596 0850 00C0      		rjmp .L80
 327:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					electing = 0;
 1597               		.loc 1 327 0
 1598 0852 1092 0000 		sts electing,__zero_reg__
 328:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					if (minId == getGUID())
 1599               		.loc 1 328 0
 1600 0856 0091 0000 		lds r16,minId
 1601 085a 1091 0000 		lds r17,minId+1
 1602               	.LVL135:
 1603 085e 0E94 0000 		call getGUID
 1604               	.LVL136:
 1605 0862 0817      		cp r16,r24
 1606 0864 1907      		cpc r17,r25
 1607 0866 01F4      		brne .L77
 1608               	.L78:
 330:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 						setLeader();
 1609               		.loc 1 330 0
 1610 0868 0E94 0000 		call setLeader
 1611               	.LVL137:
 1612 086c 00C0      		rjmp .L80
 1613               	.L77:
 334:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 						sendBackMsg(faceNum(thisChunk), 1);
 1614               		.loc 1 334 0
 1615 086e E091 0000 		lds r30,thisChunk
 1616 0872 F091 0000 		lds r31,thisChunk+1
 1617 0876 8189      		ldd r24,Z+17
 1618 0878 61E0      		ldi r22,lo8(1)
 1619 087a 8770      		andi r24,lo8(7)
 1620 087c 00C0      		rjmp .L82
 1621               	.L66:
 1622               	.LBE15:
 1623               	.LBB16:
 342:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			uint16_t id = charToGUID(&(thisChunk->data[2]));
 1624               		.loc 1 342 0
 1625 087e C801      		movw r24,r16
 1626 0880 0296      		adiw r24,2
 1627 0882 0E94 0000 		call charToGUID
 1628               	.LVL138:
 1629 0886 8C01      		movw r16,r24
 1630               	.LVL139:
 344:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 			if (id == minId)
 1631               		.loc 1 344 0
 1632 0888 8091 0000 		lds r24,minId
 1633 088c 9091 0000 		lds r25,minId+1
 1634 0890 0817      		cp r16,r24
 1635 0892 1907      		cpc r17,r25
 1636 0894 01F4      		brne .L80
 346:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				nbNeededAnswers--;
 1637               		.loc 1 346 0
 1638 0896 8091 0000 		lds r24,nbNeededAnswers
 1639 089a 8150      		subi r24,lo8(-(-1))
 1640 089c 8093 0000 		sts nbNeededAnswers,r24
 347:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				syncChildren[faceNum(thisChunk)] = thisChunk->data[4];
 1641               		.loc 1 347 0
 1642 08a0 A091 0000 		lds r26,thisChunk
 1643 08a4 B091 0000 		lds r27,thisChunk+1
 1644 08a8 5196      		adiw r26,17
 1645 08aa EC91      		ld r30,X
 1646 08ac 5197      		sbiw r26,17
 1647 08ae E770      		andi r30,lo8(7)
 1648 08b0 F0E0      		ldi r31,0
 1649 08b2 E050      		subi r30,lo8(-(syncChildren))
 1650 08b4 F040      		sbci r31,hi8(-(syncChildren))
 1651 08b6 1496      		adiw r26,4
 1652 08b8 9C91      		ld r25,X
 1653 08ba 9083      		st Z,r25
 348:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 				if (nbNeededAnswers == 0)
 1654               		.loc 1 348 0
 1655 08bc 8111      		cpse r24,__zero_reg__
 1656 08be 00C0      		rjmp .L80
 350:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					electing = 0;
 1657               		.loc 1 350 0
 1658 08c0 1092 0000 		sts electing,__zero_reg__
 351:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 					if (id == getGUID())
 1659               		.loc 1 351 0
 1660 08c4 0E94 0000 		call getGUID
 1661               	.LVL140:
 1662 08c8 0817      		cp r16,r24
 1663 08ca 1907      		cpc r17,r25
 1664 08cc 01F0      		breq .L78
 357:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 						sendBackMsg(minIdSender, 1);
 1665               		.loc 1 357 0
 1666 08ce 61E0      		ldi r22,lo8(1)
 1667 08d0 8091 0000 		lds r24,minIdSender
 1668               	.LVL141:
 1669               	.L82:
 1670 08d4 0E94 0000 		call sendBackMsg
 1671               	.LVL142:
 1672 08d8 00C0      		rjmp .L80
 1673               	.L79:
 1674               	.LBE16:
 208:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 		return 0;
 1675               		.loc 1 208 0
 1676 08da 80E0      		ldi r24,0
 1677 08dc 00C0      		rjmp .L64
 1678               	.L80:
 365:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** 	return 1;
 1679               		.loc 1 365 0
 1680 08de 81E0      		ldi r24,lo8(1)
 1681               	.L64:
 1682               	/* epilogue start */
 366:/home/pthalamy/CMU/build-modif/src-bobby/system/clock.bb **** }
 1683               		.loc 1 366 0
 1684 08e0 2896      		adiw r28,8
 1685 08e2 CDBF      		out __SP_L__,r28
 1686 08e4 DEBF      		out __SP_H__,r29
 1687 08e6 DF91      		pop r29
 1688 08e8 CF91      		pop r28
 1689 08ea 1F91      		pop r17
 1690 08ec 0F91      		pop r16
 1691 08ee FF90      		pop r15
 1692 08f0 EF90      		pop r14
 1693 08f2 DF90      		pop r13
 1694 08f4 CF90      		pop r12
 1695 08f6 BF90      		pop r11
 1696 08f8 AF90      		pop r10
 1697 08fa 9F90      		pop r9
 1698 08fc 8F90      		pop r8
 1699 08fe 7F90      		pop r7
 1700 0900 6F90      		pop r6
 1701 0902 5F90      		pop r5
 1702 0904 4F90      		pop r4
 1703 0906 3F90      		pop r3
 1704 0908 2F90      		pop r2
 1705 090a 0895      		ret
 1706               	.LFE15:
 1708               		.comm	syncChildren,6,1
 1709               		.comm	syncTimer,17,1
 1710               	.global	localClockMaxReach
 1711               		.section .bss
 1714               	localClockMaxReach:
 1715 0000 0000 0000 		.zero	4
 1716               	.global	firstCalibRec
 1719               	firstCalibRec:
 1720 0004 0000 0000 		.zero	4
 1721               	.global	offset
 1724               	offset:
 1725 0008 0000 0000 		.zero	4
 1726               	.global	nbSync
 1729               	nbSync:
 1730 000c 0000      		.zero	2
 1731               	.global	firstCalibSend
 1734               	firstCalibSend:
 1735 000e 0000 0000 		.zero	4
 1736               	.global	speedAvg
 1739               	speedAvg:
 1740 0012 0000 0000 		.zero	4
 1741               		.comm	leaderElectionTimeOut,10,1
 1742               		.comm	nbNeededAnswers,1,1
 1743               		.comm	minId,2,1
 1744               		.comm	minIdSender,1,1
 1745               	.global	electing
 1748               	electing:
 1749 0016 00        		.zero	1
 1750               	.global	isLeader
 1753               	isLeader:
 1754 0017 00        		.zero	1
 2497               	.Letext0:
 2498               		.file 2 "/usr/lib/gcc/avr/4.7.2/../../../avr/include/stdint.h"
 2499               		.file 3 "/home/pthalamy/CMU/build-modif/src-bobby/system/defs.bbh"
 2500               		.file 4 "/usr/lib/gcc/avr/4.7.2/include/stddef.h"
 2501               		.file 5 "/home/pthalamy/CMU/build-modif/src-bobby/system/handler.bbh"
 2502               		.file 6 "/home/pthalamy/CMU/build-modif/src-bobby/system/memory.bbh"
 2503               		.file 7 "/home/pthalamy/CMU/build-modif/src-bobby/system/hardwaretime.bbh"
 2504               		.file 8 "/home/pthalamy/CMU/build-modif/src-bobby/system/serial.bbh"
 2505               		.file 9 "/home/pthalamy/CMU/build-modif/src-bobby/system/ensemble.bbh"
 2506               		.file 10 "/home/pthalamy/CMU/build-modif/src-bobby/system/data_link.bbh"
 2507               		.file 11 "/usr/lib/gcc/avr/4.7.2/../../../avr/include/math.h"
 2508               		.file 12 "/home/pthalamy/CMU/build-modif/src-bobby/system/../hw-api/hwMemory.h"
 2509               		.file 13 "/usr/lib/gcc/avr/4.7.2/../../../avr/include/stdlib.h"
 2510               		.file 14 "/home/pthalamy/CMU/build-modif/src-bobby/system/message.bbh"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 clock.c
     /tmp/cctRCMUa.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/cctRCMUa.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/cctRCMUa.s:4      *ABS*:000000000000003f __SREG__
     /tmp/cctRCMUa.s:5      *ABS*:000000000000003b __RAMPZ__
     /tmp/cctRCMUa.s:6      *ABS*:0000000000000034 __CCP__
     /tmp/cctRCMUa.s:7      *ABS*:0000000000000000 __tmp_reg__
     /tmp/cctRCMUa.s:8      *ABS*:0000000000000001 __zero_reg__
     /tmp/cctRCMUa.s:13     .text:0000000000000000 freeClockChunk
     /tmp/cctRCMUa.s:30     .text:000000000000000c printSlope
     /tmp/cctRCMUa.s:47     .text:000000000000000e getClockForTime
     /tmp/cctRCMUa.s:1739   .bss:0000000000000012 speedAvg
     /tmp/cctRCMUa.s:1724   .bss:0000000000000008 offset
     /tmp/cctRCMUa.s:100    .text:0000000000000060 getEstimatedGlobalClock
     /tmp/cctRCMUa.s:153    .text:00000000000000b6 getClock
     /tmp/cctRCMUa.s:1714   .bss:0000000000000000 localClockMaxReach
     /tmp/cctRCMUa.s:207    .text:0000000000000106 isTimeLeader
     /tmp/cctRCMUa.s:1753   .bss:0000000000000017 isLeader
     /tmp/cctRCMUa.s:221    .text:000000000000010c isElecting
     /tmp/cctRCMUa.s:1748   .bss:0000000000000016 electing
     /tmp/cctRCMUa.s:235    .text:0000000000000112 isAClockSyncMessage
     /tmp/cctRCMUa.s:268    .text:000000000000012e insertReceiveTime
     /tmp/cctRCMUa.s:302    .text:0000000000000146 insertSendTime
     /tmp/cctRCMUa.s:336    .text:000000000000015e isSynchronized
     /tmp/cctRCMUa.s:1719   .bss:0000000000000004 firstCalibRec
     /tmp/cctRCMUa.s:372    .text:000000000000018e initSTChildren
                            *COM*:0000000000000006 syncChildren
     /tmp/cctRCMUa.s:398    .text:00000000000001a8 setSlave
                            *COM*:0000000000000011 syncTimer
     /tmp/cctRCMUa.s:423    .text:00000000000001c0 scheduleLeaderElection
                            *COM*:000000000000000a leaderElectionTimeOut
     /tmp/cctRCMUa.s:1122   .text:0000000000000512 startLeaderElection
     /tmp/cctRCMUa.s:470    .text:0000000000000202 handleNeighborChange
     /tmp/cctRCMUa.s:490    .text:000000000000020e initClock
     /tmp/cctRCMUa.s:1734   .bss:000000000000000e firstCalibSend
     /tmp/cctRCMUa.s:1729   .bss:000000000000000c nbSync
                            *COM*:0000000000000001 minIdSender
                            *COM*:0000000000000002 minId
     /tmp/cctRCMUa.s:552    .text:0000000000000290 sendClockChunk
     /tmp/cctRCMUa.s:653    .text:0000000000000306 sendGoMsg
     /tmp/cctRCMUa.s:712    .text:0000000000000348 sendBackMsg
     /tmp/cctRCMUa.s:779    .text:0000000000000398 synchronizeNeighbor
     /tmp/cctRCMUa.s:822    .text:00000000000003c4 synchronizeNeighbors
     /tmp/cctRCMUa.s:894    .text:0000000000000410 setLeader
     /tmp/cctRCMUa.s:938    .text:0000000000000450 requestSync
     /tmp/cctRCMUa.s:980    .text:000000000000047a broadcastClockChunk
     /tmp/cctRCMUa.s:1063   .text:00000000000004d0 broadcastGoMsg
                            *COM*:0000000000000001 nbNeededAnswers
     /tmp/cctRCMUa.s:1214   .text:0000000000000584 handleClockSyncMessage

UNDEFINED SYMBOLS
thisChunk
free
__floatunsisf
__mulsf3
__floatsisf
__addsf3
__fixunssfsi
getTime
fmax
deregisterTimer
deregisterTimeout
registerTimeout
getGUID
calloc
sendMessageToPort
GUIDIntoChar
thisNeighborhood
registerTimer
__divsf3
__subsf3
__fixsfsi
round
__udivmodhi4
charToGUID
__do_clear_bss
